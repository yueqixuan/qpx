{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"QPX","text":"<p>A standardized format and toolkit for mass spectrometry proteomics data</p> <p> </p>"},{"location":"#what-is-qpx","title":"What is QPX?","text":"<p>QPX is a comprehensive ecosystem for proteomics data that provides:</p> <ul> <li>Standardized Data Format: Parquet-based format for efficient storage and processing of proteomics data</li> <li>Universal Converter: Convert data from MaxQuant, DIA-NN, FragPipe, OpenMS, and more</li> <li>Complete Toolkit: Process, analyze, visualize, and share your proteomics results</li> <li>Python API &amp; CLI: Flexible tools for both programmatic and command-line usage</li> </ul>"},{"location":"#architecture-overview","title":"Architecture Overview","text":"<p>qpx provides a comprehensive proteomics data processing architecture with core modules for data conversion, transformation, visualization, statistical analysis, and project management.</p>"},{"location":"#documentation","title":"Documentation","text":"Section Description Quick Start Installation and basic usage Key Features Data conversion and transformation Supported Formats Input/output format specifications Example Workflow Complete usage example Installation Options Different installation methods Format Specification Data format schemas and specifications CLI Reference Complete command-line documentation Convert Commands Data format converters Transform Commands Data transformation tools Visualization Commands Plotting and visualization Statistics Commands Statistical analysis Project Management Metadata and project tools Examples &amp; Tutorials Usage examples and integrations Community &amp; Support Get help, contribute, license &amp; acknowledgments <p>Ready to get started? Install qpx and check out the examples!</p>"},{"location":"cli-convert/","title":"Convert Commands","text":"<p>Convert various mass spectrometry data formats to the QPX standard format.</p> <p></p>"},{"location":"cli-convert/#overview","title":"Overview","text":"<p>The <code>convert</code> command group provides converters for multiple proteomics software outputs, enabling standardization of data formats for downstream analysis. All commands generate parquet-format output files following the QPX specification.</p>"},{"location":"cli-convert/#available-commands","title":"Available Commands","text":"<ul> <li>diann - Convert DIA-NN report to feature format</li> <li>diann-pg - Convert DIA-NN report to protein group format</li> <li>maxquant-psm - Convert MaxQuant PSM data</li> <li>maxquant-feature - Convert MaxQuant feature data</li> <li>maxquant-pg - Convert MaxQuant protein groups</li> <li>fragpipe - Convert FragPipe PSM data</li> <li>quantms-psm - Convert mzTab to PSM format</li> <li>quantms-feature - Convert mzTab to feature format</li> <li>quantms-pg - Convert mzTab to protein group format</li> <li>idxml - Convert single idXML file to PSM format</li> <li>idxml-batch - Convert multiple idXML files to merged PSM format</li> </ul>"},{"location":"cli-convert/#diann","title":"diann","text":"<p>Convert DIA-NN report files to QPX feature format.</p>"},{"location":"cli-convert/#diann-description","title":"Description","text":"<p>This command takes a DIA-NN report file and converts it to the QPX     parquet format. The conversion includes feature data and can optionally     split the output into multiple files based on specified fields.</p>"},{"location":"cli-convert/#diann-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--report-path</code> FILE Yes - DIA-NN report file path <code>--qvalue-threshold</code> FLOAT Yes 0.05 Q-value threshold for filtering <code>--mzml-info-folder</code> DIRECTORY Yes - mzML info file folder <code>--sdrf-path</code> FILE Yes - SDRF file path for metadata <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--protein-file</code> FILE No - Protein file with specific requirements <code>--output-prefix</code> TEXT No - Prefix for output files <code>--partitions</code> TEXT No - Field(s) for splitting files (comma-separated) <code>--duckdb-max-memory</code> TEXT No - Maximum memory for DuckDB (e.g., '4GB') <code>--duckdb-threads</code> INTEGER No - Number of threads for DuckDB <code>--batch-size</code> INTEGER No 100 Number of files to process simultaneously <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#diann-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#diann-example-basic","title":"Basic Example","text":"<p>Convert a DIA-NN report with default settings:</p> <pre><code>qpxc convert diann \\\n    --report-path report.tsv \\\n    --qvalue-threshold 0.05 \\\n    --mzml-info-folder ./mzml_info \\\n    --sdrf-path data.sdrf.tsv \\\n    --output-folder ./output</code></pre>"},{"location":"cli-convert/#diann-example-advanced","title":"Advanced Example","text":"<p>Convert with file partitioning based on reference_file_name:</p> <pre><code>qpxc convert diann \\\n    --report-path tests/examples/diann/small/diann_report.tsv \\\n    --qvalue-threshold 0.05 \\\n    --mzml-info-folder tests/examples/diann/small/mzml \\\n    --sdrf-path tests/examples/diann/small/PXD019909-DIA.sdrf.tsv \\\n    --output-folder ./output\n</code></pre>"},{"location":"cli-convert/#diann-example-partitioning","title":"Advanced Example with Partitioning","text":"<p>Convert with file partitioning based on reference_file_name:</p> <pre><code>qpxc convert diann \\\n    --report-path tests/examples/diann/full/diann_report.tsv.gz \\\n    --qvalue-threshold 0.01 \\\n    --mzml-info-folder tests/examples/diann/full/mzml \\\n    --sdrf-path tests/examples/diann/full/PXD036609.sdrf.tsv \\\n    --output-folder ./output \\\n    --partitions reference_file_name \\\n    --duckdb-max-memory 8GB \\\n    --duckdb-threads 4 \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#diann-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.feature.parquet</code></li> <li>Format: Parquet file containing feature-level quantification data</li> <li>Schema: Conforms to QPX feature specification</li> </ul>"},{"location":"cli-convert/#diann-issues","title":"Common Issues","text":"<p>Issue: Out of memory errors with large files</p> <ul> <li>Solution: Increase <code>--duckdb-max-memory</code> parameter (e.g., <code>8GB</code>, <code>16GB</code>)</li> </ul> <p>Issue: Slow processing</p> <ul> <li>Solution: Increase <code>--duckdb-threads</code> to utilize more CPU cores</li> </ul> <p>Issue: Missing mzML info files</p> <ul> <li>Solution: Ensure all mzML info TSV files are in the specified folder with correct naming</li> </ul>"},{"location":"cli-convert/#diann-best-practices","title":"Best Practices","text":"<ul> <li>Use Q-value threshold of 0.05 or lower for high-confidence results</li> <li>Enable partitioning for large datasets to improve memory usage</li> <li>Use verbose mode during initial testing to diagnose issues</li> <li>Ensure SDRF file correctly matches sample names in DIA-NN report</li> </ul>"},{"location":"cli-convert/#diann-pg","title":"diann-pg","text":"<p>Convert DIA-NN report files to QPX protein group format.</p>"},{"location":"cli-convert/#diann-pg-description","title":"Description","text":"<p>This command takes a DIA-NN report file and converts it to the QPX     protein group format in parquet format.</p>"},{"location":"cli-convert/#diann-pg-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--report-path</code> FILE Yes - DIA-NN report file path <code>--pg-matrix-path</code> FILE Yes - DIA-NN protein quantities table file path <code>--sdrf-path</code> FILE Yes - SDRF file path for metadata <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No - Prefix for output files <code>--duckdb-max-memory</code> TEXT No - Maximum memory for DuckDB (e.g., '4GB') <code>--duckdb-threads</code> INTEGER No - Number of threads for DuckDB <code>--batch-size</code> INTEGER No 100 Number of files to process simultaneously <code>--standardized-intensities</code> FLAG No - Calculate standardized intensity metrics (total_all_peptides_intensity and top3_intensity) <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#diann-pg-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#diann-pg-example-basic","title":"Basic Example","text":"<p>Convert DIA-NN protein groups with default settings:</p> <pre><code>qpxc convert diann-pg \\\n    --report-path report.tsv \\\n    --pg-matrix-path report.pg_matrix.tsv \\\n    --sdrf-path data.sdrf.tsv \\\n    --output-folder ./output \\\n    --standardized-intensities</code></pre>"},{"location":"cli-convert/#diann-pg-example-performance","title":"High-Performance Example","text":"<pre><code>qpxc convert diann-pg \\\n    --report-path tests/examples/diann/full/diann_report.tsv.gz \\\n    --pg-matrix-path tests/examples/diann/full/diann_report.pg_matrix.tsv \\\n    --sdrf-path tests/examples/diann/full/PXD036609.sdrf.tsv \\\n    --output-folder ./output \\\n    --duckdb-max-memory 16GB \\\n    --duckdb-threads 8 \\\n    --output-prefix protein_groups \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#diann-pg-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.pg.parquet</code></li> <li>Format: Parquet file containing protein group quantification data</li> <li>Schema: Conforms to QPX protein group specification</li> </ul>"},{"location":"cli-convert/#diann-pg-best-practices","title":"Best Practices","text":"<ul> <li>Ensure both report and pg_matrix files are from the same DIA-NN run</li> <li>Use adequate memory allocation for large datasets</li> <li>Validate SDRF metadata matches the sample columns in the matrix file</li> </ul>"},{"location":"cli-convert/#maxquant-psm","title":"maxquant-psm","text":"<p>Convert MaxQuant PSM data from <code>msms.txt</code> to QPX parquet format.</p>"},{"location":"cli-convert/#maxquant-psm-description","title":"Description","text":"<p>This command takes a MaxQuant msms.txt file and converts it to the QPX     parquet format for PSM data.</p>"},{"location":"cli-convert/#maxquant-psm-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--msms-file</code> FILE Yes - MaxQuant msms.txt file <code>--output-folder</code> DIRECTORY Yes - Output folder <code>--batch-size</code> INTEGER No 100000 Batch size <code>--output-prefix</code> TEXT No - Output file prefix <code>--spectral-data</code> FLAG No - Include spectral data fields <code>--n-workers</code> INTEGER No - Number of parallel workers <code>--memory-limit</code> FLOAT No - Memory limit in GB <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#maxquant-psm-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#maxquant-psm-example-basic","title":"Basic Example","text":"<p>Convert MaxQuant PSM data with default settings:</p> <pre><code>qpxc convert maxquant-psm \\\n    --msms-file msms.txt \\\n    --output-folder ./output \\\n    --n-workers 8 \\\n    --memory-limit 16</code></pre>"},{"location":"cli-convert/#maxquant-psm-example-spectral","title":"With Spectral Data","text":"<pre><code>qpxc convert maxquant-psm \\\n    --msms-file tests/examples/maxquant/maxquant_simple/msms.txt \\\n    --output-folder ./output \\\n    --spectral-data \\\n    --batch-size 500000 \\\n    --output-prefix psm_with_spectra \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#maxquant-psm-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.psm.parquet</code></li> <li>Format: Parquet file containing PSM-level data</li> <li>Schema: Conforms to QPX PSM specification</li> </ul>"},{"location":"cli-convert/#maxquant-psm-best-practices","title":"Best Practices","text":"<ul> <li>Adjust <code>--batch-size</code> based on available memory</li> <li>Use <code>--spectral-data</code> flag if downstream analysis requires spectral information</li> <li>Ensure sufficient disk space for large msms.txt files</li> </ul>"},{"location":"cli-convert/#maxquant-feature","title":"maxquant-feature","text":"<p>Convert MaxQuant feature data from <code>evidence.txt</code> to QPX parquet format.</p>"},{"location":"cli-convert/#maxquant-feature-description","title":"Description","text":"<p>This command takes a MaxQuant evidence.txt file and converts it to the QPX     parquet format for feature data, using metadata from an SDRF file.</p>"},{"location":"cli-convert/#maxquant-feature-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--evidence-file</code> FILE Yes - MaxQuant evidence.txt file <code>--sdrf-file</code> FILE Yes - SDRF metadata file <code>--output-folder</code> DIRECTORY Yes - Output folder <code>--protein-file</code> FILE No - Protein list file for filtering <code>--protein-groups-file</code> FILE Yes - MaxQuant proteinGroups.txt file <code>--batch-size</code> INTEGER No 100000 Batch size <code>--output-prefix</code> TEXT No - Output file prefix <code>--n-workers</code> INTEGER No - Number of parallel workers <code>--memory-limit</code> FLOAT No - Memory limit in GB <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#maxquant-feature-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#maxquant-feature-example-basic","title":"Basic Example","text":"<p>Convert MaxQuant feature data with default settings:</p> <pre><code>qpxc convert maxquant-feature \\\n    --evidence-file evidence.txt \\\n    --sdrf-file data.sdrf.tsv \\\n    --protein-groups-file proteinGroups.txt \\\n    --output-folder ./output \\\n    --n-workers 8 \\\n    --memory-limit 16</code></pre>"},{"location":"cli-convert/#maxquant-feature-example-qvalue","title":"With Protein Groups Q-value Mapping","text":"<pre><code>qpxc convert maxquant-feature \\\n    --evidence-file tests/examples/maxquant/maxquant_full/evidence.txt.gz \\\n    --sdrf-file tests/examples/maxquant/maxquant_full/PXD001819.sdrf.tsv \\\n    --protein-groups-file tests/examples/maxquant/maxquant_full/proteinGroups.txt \\\n    --output-folder ./output \\\n    --batch-size 500000 \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#maxquant-feature-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.feature.parquet</code></li> <li>Format: Parquet file containing feature-level quantification</li> <li>Schema: Conforms to QPX feature specification</li> </ul>"},{"location":"cli-convert/#maxquant-feature-issues","title":"Common Issues","text":"<p>Issue: Memory errors with compressed evidence files</p> <ul> <li>Solution: Reduce <code>--batch-size</code> or increase available RAM</li> </ul> <p>Issue: Missing Q-value information</p> <ul> <li>Solution: Provide <code>--protein-groups-file</code> for accurate Q-value mapping</li> </ul>"},{"location":"cli-convert/#maxquant-feature-best-practices","title":"Best Practices","text":"<ul> <li>Always provide <code>--protein-groups-file</code> when available for better data quality</li> <li>Ensure SDRF sample names match MaxQuant experiment names</li> <li>Use compressed evidence files (.gz) to save disk space</li> </ul>"},{"location":"cli-convert/#maxquant-pg","title":"maxquant-pg","text":"<p>Convert MaxQuant protein groups from <code>proteinGroups.txt</code> to QPX format.</p>"},{"location":"cli-convert/#maxquant-pg-description","title":"Description","text":""},{"location":"cli-convert/#maxquant-pg-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--protein-groups-file</code> FILE Yes - MaxQuant proteinGroups.txt file <code>--sdrf-file</code> FILE Yes - SDRF metadata file <code>--evidence-file</code> FILE Yes - MaxQuant evidence.txt file <code>--output-folder</code> DIRECTORY Yes - Output folder <code>--batch-size</code> INTEGER No 10000 Batch size <code>--output-prefix</code> TEXT No - Output file prefix <code>--n-workers</code> INTEGER No - Number of parallel workers <code>--memory-limit</code> FLOAT No - Memory limit in GB <code>--standardized-intensities</code> FLAG No - Calculate standardized intensity metrics (total_all_peptides_intensity and top3_intensity) <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#maxquant-pg-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#maxquant-pg-example-basic","title":"Basic Example","text":"<p>Convert MaxQuant protein groups with default settings:</p> <pre><code>qpxc convert maxquant-pg \\\n    --protein-groups-file proteinGroups.txt \\\n    --sdrf-file data.sdrf.tsv \\\n    --evidence-file evidence.txt \\\n    --output-folder ./output \\\n    --n-workers 8 \\\n    --memory-limit 16 \\\n    --standardized-intensities</code></pre>"},{"location":"cli-convert/#maxquant-pg-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.pg.parquet</code></li> <li>Format: Parquet file containing protein group data</li> <li>Schema: Conforms to QPX protein group specification</li> </ul>"},{"location":"cli-convert/#fragpipe","title":"fragpipe","text":"<p>Convert FragPipe PSM data to QPX parquet format.</p>"},{"location":"cli-convert/#fragpipe-description","title":"Description","text":"<p>Transforms FragPipe PSM results from psm.tsv format into the standardized QPX      parquet format for downstream analysis and integration.</p>"},{"location":"cli-convert/#fragpipe-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--msms-file</code> FILE Yes - the psm.tsv file, this will be used to extract the peptide information <code>-o</code> DIRECTORY Yes - Folder where the parquet file will be generated <code>-b</code> INTEGER No 1000000 Read batch size <code>--output-prefix</code> TEXT No - Prefix of the parquet file needed to generate the file name"},{"location":"cli-convert/#fragpipe-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#fragpipe-example-basic","title":"Basic Example","text":"<p>Convert FragPipe PSM data with default settings:</p> <pre><code>qpxc convert fragpipe \\\n    --msms-file psm.tsv \\\n    --output-folder ./output \\\n    --batch-size 1000000 \\\n    --output-prefix fragpipe_psm</code></pre>"},{"location":"cli-convert/#fragpipe-example-custom","title":"With Custom Settings","text":"<pre><code>qpxc convert fragpipe \\\n    --msms-file /path/to/psm.tsv \\\n    --output-folder ./output \\\n    --batch-size 500000 \\\n    --output-prefix fragpipe_psm\n</code></pre>"},{"location":"cli-convert/#fragpipe-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.psm.parquet</code></li> <li>Format: Parquet file containing PSM data</li> <li>Schema: Conforms to QPX PSM specification</li> </ul>"},{"location":"cli-convert/#quantms-psm","title":"quantms-psm","text":"<p>Convert mzTab PSM data to QPX parquet format.</p>"},{"location":"cli-convert/#quantms-psm-description","title":"Description","text":"<p>Converts PSM data from mzTab format to the QPX standardized parquet format.      Can work with existing DuckDB indexes or create new ones from mzTab files.</p>"},{"location":"cli-convert/#quantms-psm-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--mztab-path</code> FILE No - Input mzTab file path (required if creating a new indexer) <code>--database-path</code> FILE No - DuckDB database file path (if exists, will be opened; if not, will be created if mztab-path is provided) <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No <code>psm</code> Prefix for output files (final name will be {prefix}-{uuid}.psm.parquet) <code>--spectral-data</code> FLAG No - Spectral data fields (optional) <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#quantms-psm-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#quantms-psm-example-basic","title":"Basic Example","text":"<p>Convert PSM data with default settings:</p> <pre><code>qpxc convert quantms-psm \\\n    --mztab-path /path/to/data.mzTab \\\n    --output-folder ./output \\\n    --verbose</code></pre>"},{"location":"cli-convert/#quantms-psm-example-existing","title":"Use Existing Database","text":"<pre><code>qpxc convert quantms-psm \\\n    --database-path ./existing_database.duckdb \\\n    --output-folder ./output \\\n    --spectral-data\n</code></pre>"},{"location":"cli-convert/#quantms-psm-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.psm.parquet</code></li> <li>Format: Parquet file containing PSM data</li> <li>Schema: Conforms to QPX PSM specification</li> </ul>"},{"location":"cli-convert/#quantms-psm-best-practices","title":"Best Practices","text":"<ul> <li>Reuse database files when processing multiple outputs from the same mzTab</li> <li>Use <code>--spectral-data</code> flag when spectral information is needed for downstream analysis</li> </ul>"},{"location":"cli-convert/#quantms-feature","title":"quantms-feature","text":"<p>Convert mzTab feature data to QPX parquet format.</p>"},{"location":"cli-convert/#quantms-feature-description","title":"Description","text":"<p>Converts feature-level quantification data from mzTab format to the QPX standardized      format, including MSstats quantification data.</p>"},{"location":"cli-convert/#quantms-feature-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--mztab-path</code> FILE No - Input mzTab file path (required if creating a new indexer) <code>--database-path</code> FILE No - DuckDB database file path (if exists, will be opened; if not, will be created if mztab-path is provided) <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No <code>feature</code> Prefix for output files (final name will be {prefix}-{uuid}.feature.parquet) <code>--sdrf-file</code> FILE Yes - SDRF file path <code>--msstats-file</code> FILE Yes - MSstats input file path <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#quantms-feature-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#quantms-feature-example-basic","title":"Basic Example","text":"<p>Convert feature data with default settings:</p> <pre><code>qpxc convert quantms-feature \\\n    --mztab-path /path/to/data.mzTab \\\n    --sdrf-file /path/to/metadata.sdrf.tsv \\\n    --msstats-file /path/to/msstats_in.csv \\\n    --output-folder ./output</code></pre>"},{"location":"cli-convert/#quantms-feature-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.feature.parquet</code></li> <li>Format: Parquet file containing feature quantification</li> <li>Schema: Conforms to QPX feature specification</li> </ul>"},{"location":"cli-convert/#quantms-pg","title":"quantms-pg","text":"<p>Convert mzTab protein group data to QPX parquet format.</p>"},{"location":"cli-convert/#quantms-pg-description","title":"Description","text":"<p>This command combines protein group definitions from mzTab with complete quantification     data from msstats_in.csv. Supports both TMT and LFQ data, with optional TopN and iBAQ      intensity calculations.</p>"},{"location":"cli-convert/#quantms-pg-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--mztab-path</code> FILE No - Input mzTab file path (required if creating a new indexer) <code>--database-path</code> FILE No - DuckDB database file path (if exists, will be opened; if not, will be created if mztab-path is provided) <code>--msstats-file</code> FILE Yes - Input msstats_in.csv file path for quantification <code>--sdrf-file</code> FILE Yes - SDRF file path <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No <code>pg</code> Prefix for output files (final name will be {prefix}-{uuid}.pg.parquet) <code>--compute-topn</code> FLAG No - Whether to compute TopN intensity <code>--compute-ibaq</code> FLAG No - Whether to compute iBAQ intensity <code>--topn</code> INTEGER No 3 Number of peptides to use for TopN intensity <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#quantms-pg-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#quantms-pg-example-basic","title":"Basic Example","text":"<p>Convert protein groups with default settings:</p> <pre><code>qpxc convert quantms-pg \\\n    --mztab-path /path/to/data.mzTab \\\n    --msstats-file /path/to/msstats_in.csv \\\n    --sdrf-file /path/to/metadata.sdrf.tsv \\\n    --output-folder ./output \\\n    --compute-topn \\\n    --compute-ibaq \\\n    --topn 3</code></pre>"},{"location":"cli-convert/#quantms-pg-example-lfq","title":"LFQ Data with All Intensities","text":"<pre><code>qpxc convert quantms-pg \\\n    --mztab-path tests/examples/quantms/dda-lfq-full/PXD007683-LFQ.sdrf_openms_design_openms.mzTab.gz \\\n    --msstats-file tests/examples/quantms/dda-lfq-full/PXD007683-LFQ.sdrf_openms_design_msstats_in.csv.gz \\\n    --sdrf-file tests/examples/quantms/dda-lfq-full/PXD007683-LFQ.sdrf.tsv \\\n    --output-folder ./output \\\n    --compute-topn \\\n    --compute-ibaq \\\n    --topn 3\n</code></pre>"},{"location":"cli-convert/#quantms-pg-example-tmt","title":"TMT Data (Skip iBAQ)","text":"<pre><code>qpxc convert quantms-pg \\\n    --mztab-path tests/examples/quantms/dda-plex-full/PXD007683TMT.sdrf_openms_design_openms.mzTab.gz \\\n    --msstats-file tests/examples/quantms/dda-plex-full/PXD007683TMT.sdrf_openms_design_msstats_in.csv.gz \\\n    --sdrf-file tests/examples/quantms/dda-plex-full/PXD007683-TMT.sdrf.tsv \\\n    --output-folder ./output \\\n    --no-compute-ibaq\n</code></pre>"},{"location":"cli-convert/#quantms-pg-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.pg.parquet</code></li> <li>Format: Parquet file containing protein group quantification</li> <li>Schema: Conforms to QPX protein group specification</li> </ul>"},{"location":"cli-convert/#quantms-pg-best-practices","title":"Best Practices","text":"<ul> <li>Use <code>--no-compute-ibaq</code> for TMT/iTRAQ labeled data</li> <li>Adjust <code>--topn</code> value based on dataset characteristics (typically 3-5)</li> <li>Enable verbose mode for large datasets to monitor progress</li> </ul>"},{"location":"cli-convert/#idxml","title":"idxml","text":"<p>Convert a single OpenMS idXML file to QPX PSM format.</p>"},{"location":"cli-convert/#idxml-description","title":"Description","text":"<p>Converts PSM data from OpenMS idXML format to the QPX standardized parquet format.      Can optionally attach spectral information from corresponding mzML files.</p>"},{"location":"cli-convert/#idxml-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--idxml-file</code> TEXT Yes - the IdXML file containing identifications <code>--output-folder</code> TEXT Yes - Folder where the parquet file will be generated <code>--mzml-file</code> TEXT No - Optional mzML to attach spectra by scan <code>--output-prefix-file</code> TEXT No - Prefix of the parquet file needed to generate the file name <code>--spectral-data</code> FLAG No - Spectral data fields (optional)"},{"location":"cli-convert/#idxml-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#idxml-example-basic","title":"Basic Example","text":"<p>Convert a single idXML file:</p> <pre><code>qpxc convert idxml \\\n    --idxml-file /path/to/data.idXML \\\n    --output-folder ./output</code></pre>"},{"location":"cli-convert/#idxml-example-spectral","title":"With Spectral Data","text":"<pre><code>qpxc convert idxml \\\n    --idxml-file tests/examples/idxml/SF_200217_pPeptideLibrary_pool1_HCDnlETcaD_OT_rep2_consensus_fdr_pep_luciphor.idXML \\\n    --mzml-file tests/examples/idxml/SF_200217_pPeptideLibrary_pool1_HCDnlETcaD_OT_rep1.mzML \\\n    --output-folder ./output \\\n    --spectral-data \\\n    --output-prefix-file idxml_psm_with_spectra\n</code></pre>"},{"location":"cli-convert/#idxml-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix-file}-{uuid}.psm.parquet</code></li> <li>Format: Parquet file containing PSM data</li> <li>Schema: Conforms to QPX PSM specification</li> </ul>"},{"location":"cli-convert/#idxml-batch","title":"idxml-batch","text":"<p>Convert multiple OpenMS idXML files to a single merged PSM parquet file.</p>"},{"location":"cli-convert/#idxml-batch-description","title":"Description","text":"<p>Batch converts multiple idXML files and merges them into a single QPX PSM parquet file.      Supports both folder-based and file-list-based input, with flexible mzML matching strategies.</p>"},{"location":"cli-convert/#idxml-batch-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--idxml-folder</code> DIRECTORY No - Folder containing IdXML files to convert <code>--idxml-files</code> TEXT No - Comma-separated list of IdXML file paths <code>--output-folder</code> TEXT Yes - Folder where the merged parquet file will be generated <code>--output-prefix-file</code> TEXT No <code>merged-psm</code> Prefix of the parquet file needed to generate the file name <code>--mzml-folder</code> DIRECTORY No - Optional folder containing mzML files to attach spectra by scan <code>--mzml-files</code> TEXT No - Comma-separated list of mzML file paths <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-convert/#idxml-batch-examples","title":"Usage Examples","text":""},{"location":"cli-convert/#idxml-batch-example-basic","title":"Basic Example","text":"<p>Convert multiple idXML files:</p> <pre><code>qpxc convert idxml-batch \\\n    --idxml-folder ./idxml_files \\\n    --output-folder ./output \\\n    --output-prefix-file batch_psm</code></pre>"},{"location":"cli-convert/#idxml-batch-example-folder","title":"Folder-Based Conversion","text":"<pre><code>qpxc convert idxml-batch \\\n    --idxml-folder ./idxml_files \\\n    --output-folder ./output \\\n    --output-prefix-file batch_psm\n</code></pre>"},{"location":"cli-convert/#idxml-batch-example-list","title":"File List with Index Matching","text":"<pre><code>qpxc convert idxml-batch \\\n    --idxml-files file1.idXML,file2.idXML,file3.idXML \\\n    --mzml-files file1.mzML,file2.mzML,file3.mzML \\\n    --output-folder ./output \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#idxml-batch-example-basename","title":"Folder with Basename Matching","text":"<pre><code>qpxc convert idxml-batch \\\n    --idxml-folder ./idxml_files \\\n    --mzml-folder ./mzml_files \\\n    --output-folder ./output \\\n    --output-prefix-file merged_with_spectra \\\n    --verbose\n</code></pre>"},{"location":"cli-convert/#idxml-batch-matching","title":"Matching Strategies","text":"<p>The command supports three mzML matching strategies:</p> <ol> <li>Folder-Folder: Matches files by basename (filename without extension)</li> <li>List-List: Matches files by position in the list (index-based)</li> <li>Folder-List: Matches folder files by basename with list files</li> </ol>"},{"location":"cli-convert/#idxml-batch-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix-file}-{uuid}.psm.parquet</code></li> <li>Format: Single merged parquet file containing PSM data from all inputs</li> <li>Schema: Conforms to QPX PSM specification</li> </ul>"},{"location":"cli-convert/#idxml-batch-best-practices","title":"Best Practices","text":"<ul> <li>Use verbose mode to monitor matching and conversion progress</li> <li>Ensure consistent naming when using basename matching</li> <li>Verify file order when using index-based matching</li> <li>Check temporary directory has sufficient space for large batches</li> </ul>"},{"location":"cli-convert/#related-commands","title":"Related Commands","text":"<ul> <li>Transform Commands - Further process converted data</li> <li>Visualization Commands - Create plots from converted data</li> <li>Statistics Commands - Generate statistics from converted data</li> </ul>"},{"location":"cli-project/","title":"Project Management Commands","text":"<p>Manage project metadata and file attachments for QPX projects.</p> <p></p>"},{"location":"cli-project/#overview","title":"Overview","text":"<p>The <code>project</code> command group provides tools for creating and managing project-level metadata, including integration with PRIDE Archive, SDRF file handling, and file attachment management.</p>"},{"location":"cli-project/#available-commands","title":"Available Commands","text":"<ul> <li>create - Create project.json from PRIDE accession</li> <li>attach - Attach files to project metadata</li> </ul>"},{"location":"cli-project/#create","title":"create","text":"<p>Generate a project file from a PRIDE project accession and SDRF metadata.</p>"},{"location":"cli-project/#create-description","title":"Description","text":"<p>Creates a comprehensive project.json file by combining metadata from the PRIDE Archive with      sample information from an SDRF file. This command automatically fetches project details,      publication information, and experimental metadata from PRIDE.</p>"},{"location":"cli-project/#create-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--project-accession</code> TEXT Yes - PRIDE project accession <code>--sdrf-file</code> FILE Yes - SDRF file path for metadata extraction <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--software-name</code> TEXT No - Software name used to generate the data <code>--software-version</code> TEXT No - Software version used to generate the data <code>--delete-existing</code> FLAG No - Delete existing files in the output folder"},{"location":"cli-project/#create-examples","title":"Usage Examples","text":""},{"location":"cli-project/#basic-example","title":"Basic Example","text":"<p>Create project metadata with full parameters:</p> <pre><code>qpxc project create \\\n    --project-accession PXD007683 \\\n    --sdrf-file ./metadata.sdrf.tsv \\\n    --output-folder ./project_metadata \\\n    --software-name MaxQuant \\\n    --software-version 2.0.3.0 \\\n    --delete-existing</code></pre>"},{"location":"cli-project/#with-software-information","title":"With Software Information","text":"<pre><code>qpxc project create \\\n    --project-accession PXD016999 \\\n    --sdrf-file tests/examples/AE/PXD016999-first-instrument.sdrf.tsv \\\n    --output-folder ./project_metadata \\\n    --software-name MaxQuant \\\n    --software-version 2.0.3.0 \\\n    --delete-existing\n</code></pre>"},{"location":"cli-project/#complete-workflow-example","title":"Complete Workflow Example","text":"<pre><code># Create project metadata\nqpxc project create \\\n    --project-accession PXD033169 \\\n    --sdrf-file ./PXD033169.sdrf.tsv \\\n    --output-folder ./project \\\n    --software-name OpenMS \\\n    --software-version 2.8.0\n\n# The SDRF file is automatically attached to the project\necho \"Project file created: ./project/project.json\"\n</code></pre>"},{"location":"cli-project/#output-files","title":"Output Files","text":"<p>The command generates the following files in the output folder:</p> <ol> <li>project.json: Main project metadata file</li> <li>{project_accession}.sdrf.tsv: Copy of the SDRF file attached to the project</li> </ol>"},{"location":"cli-project/#projectjson-structure","title":"project.json Structure","text":"<p>The generated <code>project.json</code> file contains:</p> <pre><code>{\n  \"accession\": \"PXD001234\",\n  \"title\": \"Project title from PRIDE\",\n  \"description\": \"Project description from PRIDE\",\n  \"organism\": [\"Homo sapiens\"],\n  \"instrument\": [\"Q Exactive HF\"],\n  \"quantification_method\": \"label free\",\n  \"publication\": {\n    \"title\": \"Publication title\",\n    \"doi\": \"10.1234/journal.1234567\",\n    \"pubmed_id\": \"12345678\"\n  },\n  \"samples\": [\n    {\n      \"sample_id\": \"Sample_001\",\n      \"condition\": \"Control\",\n      \"biological_replicate\": \"1\"\n    }\n  ],\n  \"software\": {\n    \"name\": \"MaxQuant\",\n    \"version\": \"2.0.3.0\"\n  },\n  \"qpx_version\": \"1.0.0\",\n  \"files\": [\n    {\n      \"name\": \"PXD001234.sdrf.tsv\",\n      \"type\": \"sdrf\",\n      \"checksum\": \"abc123...\"\n    }\n  ]\n}\n</code></pre>"},{"location":"cli-project/#metadata-sources","title":"Metadata Sources","text":"<p>The command integrates metadata from multiple sources:</p> Source Information Retrieved PRIDE Archive Project title, description, organism, publication info, instrument details SDRF File Sample metadata, experimental design, conditions, replicates Command Parameters Software information, qpx version"},{"location":"cli-project/#common-issues","title":"Common Issues","text":"<p>Issue: Project not found in PRIDE</p> <ul> <li>Solution: Verify the project accession is correct and the project is public in PRIDE</li> </ul> <p>Issue: Network timeout when fetching PRIDE metadata</p> <ul> <li>Solution: Check internet connection or try again later</li> </ul> <p>Issue: SDRF sample names don't match data files</p> <ul> <li>Solution: Ensure SDRF file is correctly formatted and sample names match your data</li> </ul>"},{"location":"cli-project/#create-best-practices","title":"Best Practices","text":"<ul> <li>Run this command at the beginning of data processing to establish provenance</li> <li>Include software name and version for reproducibility</li> <li>Verify SDRF file format before running (use PRIDE SDRF validator)</li> <li>Keep the project.json file with your processed data</li> <li>Use <code>--delete-existing</code> flag carefully to avoid accidental data loss</li> </ul>"},{"location":"cli-project/#create-validation","title":"Validation","text":"<p>After creating the project file, validate it:</p> <pre><code># Check the project file was created\nls -lh ./project_metadata/project.json\n\n# View the project metadata\ncat ./project_metadata/project.json | python -m json.tool\n\n# Verify SDRF was attached\nls -lh ./project_metadata/*.sdrf.tsv\n</code></pre>"},{"location":"cli-project/#attach","title":"attach","text":"<p>Attach additional files to an existing project metadata file.</p>"},{"location":"cli-project/#attach-description","title":"Description","text":"<p>Adds references to data files in the project.json metadata. This command is useful for tracking all files associated with a project.</p>"},{"location":"cli-project/#attach-parameters","title":"Parameters","text":"Parameter Type Required Default Description <code>--project-file</code> Path Yes - Existing project.json file path <code>--attach-file</code> Path Yes - File to attach to the project <code>--category</code> Choice Yes - File category: sdrf-file, psm-file, feature-file, absolute-file, differential-file <code>--is-folder</code> Flag No False Indicates if the file is a folder <code>--partitions</code> String No - Fields used for splitting files, separated by comma <code>--replace-existing</code> Flag No False Whether to delete old files"},{"location":"cli-project/#attach-examples","title":"Usage Examples","text":""},{"location":"cli-project/#attach-psm-file","title":"Attach PSM File","text":"<pre><code>qpxc project attach \\\n    --project-file ./project/project.json \\\n    --attach-file ./output/psm-abc123.psm.parquet \\\n    --category psm-file\n</code></pre>"},{"location":"cli-project/#attach-multiple-files","title":"Attach Multiple Files","text":"<pre><code># Attach PSM file\nqpxc project attach \\\n    --project-file ./project/project.json \\\n    --attach-file ./output/psm.parquet \\\n    --category psm-file\n\n# Attach feature file\nqpxc project attach \\\n    --project-file ./project/project.json \\\n    --attach-file ./output/feature.parquet \\\n    --category feature-file\n\n# Attach absolute expression file\nqpxc project attach \\\n    --project-file ./project/project.json \\\n    --attach-file ./output/ae.parquet \\\n    --category absolute-file\n</code></pre>"},{"location":"cli-project/#complete-project-assembly","title":"Complete Project Assembly","text":"<pre><code>#!/bin/bash\n\nPROJECT_FILE=\"./project/project.json\"\n\n# Create project metadata\nqpxc project create \\\n    --project-accession PXD001234 \\\n    --sdrf-file ./metadata.sdrf.tsv \\\n    --output-folder ./project \\\n    --software-name MaxQuant \\\n    --software-version 2.0.3.0\n\n# Attach all processed files\nfor file in ./output/*.parquet; do\n    # Determine file category from filename\n    if [[ $file == *\"psm\"* ]]; then\n        category=\"psm-file\"\n    elif [[ $file == *\"feature\"* ]]; then\n        category=\"feature-file\"\n    elif [[ $file == *\"absolute\"* ]]; then\n        category=\"absolute-file\"\n    elif [[ $file == *\"differential\"* ]]; then\n        category=\"differential-file\"\n    else\n        continue\n    fi\n\n    qpxc project attach \\\n        --project-file \"$PROJECT_FILE\" \\\n        --attach-file \"$file\" \\\n        --category \"$category\"\ndone\n\necho \"All files attached to project\"\n</code></pre>"},{"location":"cli-project/#file-categories","title":"File Categories","text":"<p>Supported file category values:</p> Category Description <code>psm-file</code> Peptide-spectrum match data <code>feature-file</code> Feature-level quantification <code>absolute-file</code> Absolute expression data <code>differential-file</code> Differential expression results <code>sdrf-file</code> Sample and data relationship format"},{"location":"cli-project/#output","title":"Output","text":"<p>The command updates the project.json file by adding a file entry to the appropriate section based on the category.</p>"},{"location":"cli-project/#attach-best-practices","title":"Best Practices","text":"<ul> <li>Attach files immediately after creating them to maintain accurate file tracking</li> <li>Use correct file categories for proper organization</li> <li>Keep project.json file backed up as it tracks all project data</li> </ul>"},{"location":"cli-project/#project-metadata-best-practices","title":"Project Metadata Best Practices","text":""},{"location":"cli-project/#complete-project-setup-workflow","title":"Complete Project Setup Workflow","text":"<pre><code>#!/bin/bash\n\n# Define variables\nPROJECT_ID=\"PXD001234\"\nSDRF_FILE=\"./metadata/${PROJECT_ID}.sdrf.tsv\"\nOUTPUT_DIR=\"./processed\"\nPROJECT_DIR=\"./project\"\n\n# Step 1: Create project metadata\necho \"Creating project metadata...\"\nqpxc project create \\\n    --project-accession \"$PROJECT_ID\" \\\n    --sdrf-file \"$SDRF_FILE\" \\\n    --output-folder \"$PROJECT_DIR\" \\\n    --software-name MaxQuant \\\n    --software-version 2.0.3.0\n\n# Step 2: Process data (example with MaxQuant)\necho \"Processing data...\"\nqpxc convert maxquant-psm \\\n    --msms-file ./raw/msms.txt \\\n    --output-folder \"$OUTPUT_DIR\"\n\nqpxc convert maxquant-feature \\\n    --evidence-file ./raw/evidence.txt \\\n    --sdrf-file \"$SDRF_FILE\" \\\n    --output-folder \"$OUTPUT_DIR\"\n\nqpxc convert maxquant-pg \\\n    --protein-groups-file ./raw/proteinGroups.txt \\\n    --sdrf-file \"$SDRF_FILE\" \\\n    --output-folder \"$OUTPUT_DIR\"\n\n# Step 3: Attach all processed files\necho \"Attaching processed files to project...\"\nfor file in \"$OUTPUT_DIR\"/*.parquet; do\n    filename=$(basename \"$file\")\n\n    # Determine category\n    if [[ $filename == *\"psm\"* ]]; then\n        category=\"psm-file\"\n    elif [[ $filename == *\"feature\"* ]]; then\n        category=\"feature-file\"\n    fi\n\n    qpxc project attach \\\n        --project-file \"$PROJECT_DIR/project.json\" \\\n        --attach-file \"$file\" \\\n        --category \"$category\"\ndone\n\necho \"Project setup complete!\"\necho \"Project metadata: $PROJECT_DIR/project.json\"\n</code></pre>"},{"location":"cli-project/#version-control-integration","title":"Version Control Integration","text":"<p>Track project metadata with git:</p> <pre><code># Initialize git repository for project\ncd ./project\ngit init\ngit add project.json *.sdrf.tsv\ngit commit -m \"Initial project metadata for $PROJECT_ID\"\n\n# After attaching files\ngit add project.json\ngit commit -m \"Attached processed data files\"\n\n# Tag releases\ngit tag -a v1.0 -m \"Initial data release\"\n</code></pre>"},{"location":"cli-project/#data-sharing","title":"Data Sharing","text":"<p>Prepare project for sharing:</p> <pre><code>#!/bin/bash\n\nPROJECT_DIR=\"./project\"\nARCHIVE_NAME=\"project_data_$(date +%Y%m%d).tar.gz\"\n\n# Create archive with project metadata and data\ntar -czf \"$ARCHIVE_NAME\" \\\n    \"$PROJECT_DIR/project.json\" \\\n    \"$PROJECT_DIR\"/*.sdrf.tsv \\\n    ./output/*.parquet\n\necho \"Project archive created: $ARCHIVE_NAME\"\necho \"SHA256: $(sha256sum $ARCHIVE_NAME)\"\n</code></pre>"},{"location":"cli-project/#related-commands","title":"Related Commands","text":"<ul> <li>Convert Commands - Generate data files to attach to projects</li> <li>Transform Commands - Process data for project workflows</li> <li>Statistics Commands - Generate project statistics</li> </ul>"},{"location":"cli-reference/","title":"CLI Reference","text":"<p>The qpx command-line tool provides a comprehensive set of commands for converting, transforming, visualizing, and analyzing mass spectrometry proteomics data.</p>"},{"location":"cli-reference/#overview","title":"Overview","text":"<p>The qpx CLI is organized into five main command groups:</p>"},{"location":"cli-reference/#convert-commands","title":"Convert Commands","text":"<p>Convert various mass spectrometry data formats to the QPX standard format:</p> <ul> <li>DIA-NN Conversion: Convert DIA-NN reports to feature and protein group formats</li> <li>MaxQuant Conversion: Convert MaxQuant PSM, feature, and protein group data</li> <li>FragPipe Conversion: Convert FragPipe PSM data to QPX format</li> <li>QuantMS Conversion: Create QPX data files from mzTab format</li> <li>idXML Conversion: Convert OpenMS idXML format PSM data</li> </ul> <p>View detailed documentation \u2192</p>"},{"location":"cli-reference/#transform-commands","title":"Transform Commands","text":"<p>Transform and process data within the QPX ecosystem:</p> <ul> <li>Absolute Expression (AE): Convert iBAQ absolute expression data to QPX format (format specification)</li> <li>Differential Expression (DE): Convert MSstats differential expression analysis results</li> <li>Gene Mapping: Map gene information to protein data</li> <li>iBAQ Transformation: Process iBAQ quantification files</li> <li>Spectra Mapping: Map spectra information</li> <li>UniProt Mapping: Update UniProt annotation information</li> <li>AnnData Merging: Merge multiple AE files into AnnData format</li> </ul> <p>View detailed documentation \u2192</p>"},{"location":"cli-reference/#visualization-commands","title":"Visualization Commands","text":"<p>Create various data visualization plots:</p> <ul> <li>PSM/Peptide distribution plots</li> <li>iBAQ distribution plots</li> <li>Intensity distribution plots (KDE, box plots)</li> <li>Peptide-protein distribution plots</li> </ul> <p>View detailed documentation \u2192</p>"},{"location":"cli-reference/#statistics-commands","title":"Statistics Commands","text":"<p>Perform statistical analysis on QPX data:</p> <ul> <li>Project AE data statistics</li> <li>PSM data statistics</li> <li>Generate comprehensive statistical reports</li> </ul> <p>View detailed documentation \u2192</p>"},{"location":"cli-reference/#project-management-commands","title":"Project Management Commands","text":"<p>Manage project metadata and files:</p> <ul> <li>Create project.json from PRIDE projects</li> <li>Attach files to project metadata</li> </ul> <p>View detailed documentation \u2192</p>"},{"location":"cli-reference/#quick-start","title":"Quick Start","text":""},{"location":"cli-reference/#installation","title":"Installation","text":"<pre><code>pip install qpx\n</code></pre>"},{"location":"cli-reference/#basic-usage","title":"Basic Usage","text":"<p>View all available commands:</p> <pre><code>qpxc --help\n</code></pre> <p>View help for a specific command group:</p> <pre><code>qpxc convert --help\n</code></pre> <p>View detailed help for a specific command:</p> <pre><code>qpxc convert diann --help\n</code></pre>"},{"location":"cli-reference/#common-options","title":"Common Options","text":"<p>Most commands support the following common options:</p> <ul> <li><code>--verbose</code>: Enable verbose logging for debugging</li> <li><code>--output-folder</code>: Specify the output directory</li> <li><code>--output-prefix</code>: Specify the output file prefix</li> </ul>"},{"location":"cli-reference/#example-data-processing-workflow","title":"Example Data Processing Workflow","text":"<p>A typical data processing workflow:</p> <pre><code># 1. Convert raw data\nqpxc convert maxquant-psm \\\n    --msms-file msms.txt \\\n    --output-folder ./output\n\n# 2. Transform to absolute expression data\nqpxc transform ae \\\n    --ibaq-file ibaq.tsv \\\n    --sdrf-file metadata.sdrf.tsv \\\n    --output-folder ./output\n\n# 3. Generate visualization\nqpxc visualize plot ibaq-distribution \\\n    --ibaq-path ./output/ae.parquet \\\n    --save-path ./plots/distribution.svg\n\n# 4. Generate statistical report\nqpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./stats/report.txt\n</code></pre>"},{"location":"cli-reference/#getting-help","title":"Getting Help","text":"<ul> <li>Each command provides detailed help information using the <code>--help</code> parameter</li> <li>See Format Specification for output file formats</li> <li>View the online format specification for detailed schema information</li> <li>Visit the GitHub Repository to report issues</li> </ul>"},{"location":"cli-stats/","title":"Statistics Commands","text":"<p>Perform statistical analysis on QPX data.</p> <p></p>"},{"location":"cli-stats/#overview","title":"Overview","text":"<p>The <code>stats</code> command group provides tools for generating comprehensive statistical summaries of QPX data files. These commands help assess data quality, completeness, and provide key metrics for experimental reports.</p>"},{"location":"cli-stats/#available-commands","title":"Available Commands","text":"<p>All statistics commands are accessed through the <code>analyze</code> subcommand:</p> <ul> <li>project-ae - Generate statistics for absolute expression data</li> <li>psm - Generate statistics for PSM data</li> </ul>"},{"location":"cli-stats/#project-ae","title":"project-ae","text":"<p>Generate comprehensive statistics for a project's absolute expression data.</p>"},{"location":"cli-stats/#project-ae-description","title":"Description","text":"<p>Analyzes both absolute expression (AE) and PSM data to generate a complete statistical summary.      This command is useful for quality control and generating summary statistics for publications or reports.</p>"},{"location":"cli-stats/#project-ae-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--absolute-path</code> FILE Yes - Absolute expression file path <code>--parquet-path</code> FILE Yes - PSM parquet file path <code>--save-path</code> FILE No - Output statistics file path (e.g. stats.txt)"},{"location":"cli-stats/#project-ae-examples","title":"Usage Examples","text":""},{"location":"cli-stats/#project-ae-example-console","title":"Print to Console","text":"<p>Generate project statistics:</p> <pre><code>qpxc stats analyze project-ae \\\n    --absolute-path ./output/ae.parquet \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/project_statistics.txt</code></pre>"},{"location":"cli-stats/#project-ae-example-file","title":"Save to File","text":"<pre><code>qpxc stats analyze project-ae \\\n    --absolute-path ./output/ae.parquet \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/project_statistics.txt\n</code></pre>"},{"location":"cli-stats/#project-ae-output","title":"Output Format","text":"<p>The command generates a text report with the following metrics:</p> <pre><code>Number of proteins: 2,547\nNumber of peptides: 12,384\nNumber of samples: 24\nNumber of peptidoforms: 15,921\nNumber of msruns: 24\niBAQ Number of proteins: 2,547\niBAQ Number of samples: 24\n</code></pre>"},{"location":"cli-stats/#project-ae-metrics","title":"Metrics Explained","text":"Metric Description Number of proteins Unique protein identifications Number of peptides Unique peptide sequences identified Number of samples Biological samples in the dataset Number of peptidoforms Unique modified peptide forms Number of msruns Total MS runs performed iBAQ Number of proteins Proteins with iBAQ quantification iBAQ Number of samples Samples with iBAQ data"},{"location":"cli-stats/#project-ae-use-cases","title":"Use Cases","text":"<ul> <li>Quality Control: Verify expected number of identifications</li> <li>Publication Reporting: Generate summary statistics for methods sections</li> <li>Data Completeness: Assess coverage across samples</li> <li>Comparative Analysis: Compare statistics across different processing pipelines</li> </ul>"},{"location":"cli-stats/#project-ae-best-practices","title":"Best Practices","text":"<ul> <li>Run statistics after data processing to verify completeness</li> <li>Compare statistics with expected values based on sample type and instrument</li> <li>Use for QC before downstream analysis</li> <li>Include in supplementary materials for publications</li> </ul>"},{"location":"cli-stats/#psm","title":"psm","text":"<p>Generate statistics for PSM (Peptide-Spectrum Match) data.</p>"},{"location":"cli-stats/#psm-description","title":"Description","text":"<p>Analyzes PSM data to generate detailed statistics about identifications, including protein,      peptide, and PSM counts.</p>"},{"location":"cli-stats/#psm-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--parquet-path</code> FILE Yes - PSM parquet file path <code>--save-path</code> FILE No - Output statistics file path (e.g. stats.txt)"},{"location":"cli-stats/#psm-examples","title":"Usage Examples","text":""},{"location":"cli-stats/#psm-example-console","title":"Print to Console","text":"<p>Generate PSM statistics:</p> <pre><code>qpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/psm_statistics.txt</code></pre>"},{"location":"cli-stats/#psm-example-file","title":"Save to File","text":"<pre><code>qpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/psm_statistics.txt\n</code></pre>"},{"location":"cli-stats/#psm-output","title":"Output Format","text":"<pre><code>Number of proteins: 1,823\nNumber of peptides: 8,642\nNumber of peptidoforms: 11,205\nNumber of PSMs: 45,892\nNumber of msruns: 12\n</code></pre>"},{"location":"cli-stats/#psm-metrics","title":"Metrics Explained","text":"Metric Description Number of proteins Unique proteins with at least one PSM Number of peptides Unique peptide sequences (without modifications) Number of peptidoforms Unique peptide sequences with modifications Number of PSMs Total peptide-spectrum matches Number of msruns Number of MS runs contributing data"},{"location":"cli-stats/#psm-understanding","title":"Understanding the Metrics","text":""},{"location":"cli-stats/#peptide-vs-peptidoform","title":"Peptide vs Peptidoform","text":"<ul> <li>Peptide: Amino acid sequence (e.g., <code>PEPTIDE</code>)</li> <li>Peptidoform: Peptide + modifications (e.g., <code>PEPTIDE[+16]</code>)</li> </ul>"},{"location":"cli-stats/#expected-ratios","title":"Expected Ratios","text":"<p>Typical ratios for quality data:</p> <ul> <li>PSMs per peptide: 2-5 (varies with replicates)</li> <li>Peptidoforms per peptide: 1-3 (depends on PTM analysis)</li> <li>Peptides per protein: 3-20 (depends on protein abundance and coverage)</li> </ul>"},{"location":"cli-stats/#psm-use-cases","title":"Use Cases","text":"<ul> <li>Quality Assessment: Verify identification rates</li> <li>Method Optimization: Compare different search parameters</li> <li>Replication Analysis: Assess consistency across runs</li> <li>FDR Validation: Ensure sufficient identifications after filtering</li> </ul>"},{"location":"cli-stats/#psm-best-practices","title":"Best Practices","text":"<ul> <li>Compare PSM counts before and after FDR filtering</li> <li>Monitor peptidoform counts to assess modification analysis quality</li> <li>Track msrun numbers to verify all files processed correctly</li> <li>Use as input for sample size calculations in future experiments</li> </ul>"},{"location":"cli-stats/#statistical-interpretation-guide","title":"Statistical Interpretation Guide","text":""},{"location":"cli-stats/#data-quality-indicators","title":"Data Quality Indicators","text":""},{"location":"cli-stats/#good-quality-signs","title":"Good Quality Signs","text":"<ul> <li>Consistent protein counts across replicates</li> <li>Expected PSM-to-peptide ratios</li> <li>Complete data across all msruns</li> <li>Reasonable peptidoform diversity</li> </ul>"},{"location":"cli-stats/#potential-issues","title":"Potential Issues","text":"<ul> <li>Very low PSM counts: Search parameter issues, poor sample quality</li> <li>High peptidoform-to-peptide ratio: Over-prediction of modifications</li> <li>Missing msruns: File processing errors</li> <li>Extreme variation: Batch effects, contamination</li> </ul>"},{"location":"cli-stats/#comparative-analysis","title":"Comparative Analysis","text":"<p>When comparing datasets:</p> <ol> <li>Normalize by sample amount: Account for loading differences</li> <li>Consider instrument type: Different platforms yield different numbers</li> <li>Account for search space: Database size affects identification rates</li> <li>Match FDR thresholds: Ensure fair comparison</li> </ol>"},{"location":"cli-stats/#reporting-guidelines","title":"Reporting Guidelines","text":"<p>For publications, report:</p> <ul> <li>Total unique proteins, peptides, and PSMs</li> <li>Number of biological replicates</li> <li>Number of technical replicates (msruns)</li> <li>FDR thresholds applied</li> <li>Protein and peptide identification rates</li> </ul>"},{"location":"cli-stats/#automation-and-integration","title":"Automation and Integration","text":""},{"location":"cli-stats/#batch-processing","title":"Batch Processing","text":"<p>Process multiple files:</p> <pre><code>#!/bin/bash\nfor file in ./output/*.psm.parquet; do\n    filename=$(basename \"$file\" .parquet)\n    qpxc stats analyze psm \\\n        --parquet-path \"$file\" \\\n        --save-path \"./reports/${filename}_stats.txt\"\ndone\n</code></pre>"},{"location":"cli-stats/#integration-with-reports","title":"Integration with Reports","text":"<p>Use output in automated reports:</p> <pre><code>qpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/stats.txt\n\n# Extract specific metrics\ngrep \"Number of proteins\" ./reports/stats.txt &gt;&gt; ./summary_report.md\n</code></pre>"},{"location":"cli-stats/#combining-with-visualization","title":"Combining with Visualization","text":"<p>Generate both statistics and plots:</p> <pre><code># Generate statistics\nqpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/stats.txt\n\n# Generate visualizations\nqpxc visualize plot peptide-distribution \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/peptide_dist.svg\n</code></pre>"},{"location":"cli-stats/#advanced-usage","title":"Advanced Usage","text":""},{"location":"cli-stats/#quality-control-workflow","title":"Quality Control Workflow","text":"<p>Complete QC workflow example:</p> <pre><code>#!/bin/bash\n\n# 1. Generate PSM statistics\nqpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./qc/psm_stats.txt\n\n# 2. Generate AE statistics (if available)\nif [ -f ./output/ae.parquet ]; then\n    qpxc stats analyze project-ae \\\n        --absolute-path ./output/ae.parquet \\\n        --parquet-path ./output/psm.parquet \\\n        --save-path ./qc/ae_stats.txt\nfi\n\n# 3. Create visualizations\nqpxc visualize plot box-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./qc/intensity_boxplot.svg\n\nqpxc visualize plot peptide-distribution \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./qc/peptide_distribution.svg\n\necho \"QC report generated in ./qc/\"\n</code></pre>"},{"location":"cli-stats/#custom-thresholds","title":"Custom Thresholds","text":"<p>Define quality thresholds:</p> <pre><code>#!/bin/bash\n\n# Generate statistics\nqpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./stats.txt\n\n# Check thresholds\nproteins=$(grep \"Number of proteins\" ./stats.txt | awk '{print $4}' | tr -d ',')\npeptides=$(grep \"Number of peptides\" ./stats.txt | awk '{print $4}' | tr -d ',')\n\nif [ \"$proteins\" -lt 1000 ]; then\n    echo \"WARNING: Low protein count ($proteins)\"\nfi\n\nif [ \"$peptides\" -lt 5000 ]; then\n    echo \"WARNING: Low peptide count ($peptides)\"\nfi\n</code></pre>"},{"location":"cli-stats/#related-commands","title":"Related Commands","text":"<ul> <li>Convert Commands - Generate data files for analysis</li> <li>Transform Commands - Process data before statistics</li> <li>Visualization Commands - Create visual representations of statistics</li> </ul>"},{"location":"cli-transform/","title":"Transform Commands","text":"<p>Transform and process data within the QPX ecosystem.</p> <p></p>"},{"location":"cli-transform/#overview","title":"Overview","text":"<p>The <code>transform</code> command group provides tools for processing and transforming QPX data into various downstream formats. These commands enable absolute and differential expression analysis, metadata mapping, and data format conversions.</p>"},{"location":"cli-transform/#available-commands","title":"Available Commands","text":"<ul> <li>ae - Convert iBAQ to absolute expression format</li> <li>differential - Convert MSstats differential expression data</li> <li>gene - Map gene information to proteins</li> <li>ibaq - Process iBAQ quantification files</li> <li>spectra - Map spectrum information</li> <li>uniprot - Map latest UniProt annotations</li> <li>anndata - Merge AE files into AnnData format</li> </ul>"},{"location":"cli-transform/#ae","title":"ae","text":"<p>Convert iBAQ absolute expression data to QPX format.</p>"},{"location":"cli-transform/#ae-description","title":"Description","text":"<p>Transforms iBAQ (intensity-Based Absolute Quantification) data into the standardized      QPX absolute expression format. It integrates protein quantification with sample      metadata from SDRF files.</p> <p>Format Specification: For details about the AE format structure and fields, see the Absolute Expression Format Specification.</p>"},{"location":"cli-transform/#ae-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--ibaq-file</code> FILE Yes - IBAQ file path <code>--sdrf-file</code> FILE Yes - SDRF file path <code>--protein-file</code> FILE No - Protein file that meets specific requirements <code>--project-file</code> FILE No - QPX project file <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No - Prefix for output files <code>--delete-existing</code> FLAG No - Delete existing files in output folder"},{"location":"cli-transform/#ae-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#ae-example-basic","title":"Basic Example","text":"<p>Convert iBAQ data with default settings:</p> <pre><code>qpxc transform ae \\\n    --ibaq-file ibaq_data.tsv \\\n    --sdrf-file metadata.sdrf.tsv \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#ae-example-metadata","title":"With Project Metadata","text":"<pre><code>qpxc transform ae \\\n    --ibaq-file tests/examples/AE/PXD016999.1-ibaq.tsv \\\n    --sdrf-file tests/examples/AE/PXD016999-first-instrument.sdrf.tsv \\\n    --project-file tests/examples/AE/project.json \\\n    --output-folder ./output \\\n    --output-prefix ae_with_metadata \\\n    --delete-existing\n</code></pre>"},{"location":"cli-transform/#ae-example-filter","title":"Filter Specific Proteins","text":"<pre><code>qpxc transform ae \\\n    --ibaq-file tests/examples/AE/PXD016999.1-ibaq.tsv \\\n    --sdrf-file tests/examples/AE/PXD016999-first-instrument.sdrf.tsv \\\n    --protein-file tests/examples/fasta/Homo-sapiens.fasta \\\n    --output-folder ./output\n</code></pre>"},{"location":"cli-transform/#ae-input-formats","title":"Input File Formats","text":"<p>iBAQ File: Tab-separated file with protein accessions and iBAQ intensities</p> <pre><code>ProteinID    Sample1    Sample2    Sample3\nP12345       1000000    950000     1050000\nQ67890       500000     480000     520000\n</code></pre> <p>SDRF File: Standard PRIDE SDRF format with sample metadata</p>"},{"location":"cli-transform/#ae-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.absolute.parquet</code></li> <li>Format: Parquet file containing absolute expression quantification</li> <li>Schema: Conforms to QPX absolute expression specification</li> </ul>"},{"location":"cli-transform/#ae-issues","title":"Common Issues","text":"<p>Issue: Mismatched sample names between iBAQ and SDRF</p> <ul> <li>Solution: Ensure column names in iBAQ file match sample identifiers in SDRF</li> </ul> <p>Issue: Missing protein accessions</p> <ul> <li>Solution: Provide <code>--protein-file</code> to filter and validate protein IDs</li> </ul>"},{"location":"cli-transform/#ae-best-practices","title":"Best Practices","text":"<ul> <li>Always provide project metadata file when available for better data provenance</li> <li>Use <code>--delete-existing</code> flag carefully to avoid accidental data loss</li> <li>Validate SDRF file format before processing</li> <li>Check sample name consistency across input files</li> </ul>"},{"location":"cli-transform/#differential","title":"differential","text":"<p>Convert MSstats differential expression data to QPX format.</p>"},{"location":"cli-transform/#differential-description","title":"Description","text":"<p>Transforms differential expression analysis results from MSstats into the standardized      QPX differential expression format. Supports FDR-based filtering and protein-specific subsetting.</p>"},{"location":"cli-transform/#differential-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--msstats-file</code> FILE Yes - MSstats differential file <code>--sdrf-file</code> FILE Yes - SDRF file needed to extract metadata <code>--project-file</code> FILE No - QPX project file <code>--protein-file</code> FILE No - Protein file that meets specific requirements <code>--fdr-threshold</code> FLOAT No <code>0.05</code> FDR threshold to filter results <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No - Prefix for output files <code>--delete-existing</code> FLAG No - Delete existing files in output folder <code>--verbose</code> FLAG No - Enable verbose logging"},{"location":"cli-transform/#differential-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#differential-example-basic","title":"Basic Example","text":"<p>Convert MSstats differential expression data:</p> <pre><code>qpxc transform differential \\\n    --msstats-file msstats_comparisons.csv \\\n    --sdrf-file metadata.sdrf.tsv \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#differential-example-fdr","title":"With Custom FDR Threshold","text":"<pre><code>qpxc transform differential \\\n    --msstats-file tests/examples/DE/PXD033169.sdrf_openms_design_msstats_in_comparisons.csv \\\n    --sdrf-file tests/examples/DE/PXD033169.sdrf.tsv \\\n    --fdr-threshold 0.01 \\\n    --output-folder ./output \\\n    --output-prefix de_stringent \\\n    --verbose\n</code></pre>"},{"location":"cli-transform/#differential-example-metadata","title":"With Project Metadata","text":"<pre><code>qpxc transform differential \\\n    --msstats-file tests/examples/DE/PXD033169.sdrf_openms_design_msstats_in_comparisons.csv \\\n    --sdrf-file tests/examples/DE/PXD033169.sdrf.tsv \\\n    --project-file tests/examples/DE/project.json \\\n    --fdr-threshold 0.05 \\\n    --output-folder ./output \\\n    --delete-existing\n</code></pre>"},{"location":"cli-transform/#differential-input-format","title":"Input File Format","text":"<p>MSstats File: CSV file with comparison results</p> <pre><code>Protein,Label,log2FC,SE,Tvalue,DF,pvalue,adj.pvalue\nP12345,Condition2-Condition1,2.5,0.3,8.33,10,0.0001,0.001\nQ67890,Condition2-Condition1,-1.8,0.4,-4.5,10,0.002,0.01\n</code></pre>"},{"location":"cli-transform/#differential-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.differential.parquet</code></li> <li>Format: Parquet file containing differential expression results</li> <li>Schema: Conforms to QPX differential expression specification</li> </ul>"},{"location":"cli-transform/#differential-issues","title":"Common Issues","text":"<p>Issue: No significant results after FDR filtering</p> <ul> <li>Solution: Increase <code>--fdr-threshold</code> or check input data quality</li> </ul> <p>Issue: Memory errors with large comparison files</p> <ul> <li>Solution: Process comparisons in batches or increase available memory</li> </ul>"},{"location":"cli-transform/#differential-best-practices","title":"Best Practices","text":"<ul> <li>Use FDR threshold of 0.05 or lower for publication-quality results</li> <li>Enable verbose mode to monitor filtering statistics</li> <li>Validate comparison group names match SDRF metadata</li> <li>Include project file for complete data provenance</li> </ul>"},{"location":"cli-transform/#gene","title":"gene","text":"<p>Map gene information from FASTA to parquet format.</p>"},{"location":"cli-transform/#gene-description","title":"Description","text":"<p>Maps gene names and information from a FASTA file to protein identifications in QPX      PSM or feature files. This command enriches protein data with gene-level metadata extracted      from FASTA headers.</p>"},{"location":"cli-transform/#gene-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--parquet-path</code> FILE Yes - PSM or feature parquet file path <code>--fasta</code> FILE Yes - FASTA file path <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--file-num</code> INTEGER No 10 Number of rows to read in each batch <code>--partitions</code> TEXT No - Fields for splitting files (comma-separated) <code>--species</code> TEXT No human Species name (default: human)"},{"location":"cli-transform/#gene-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#gene-example-basic","title":"Basic Example","text":"<p>Map gene information to parquet file:</p> <pre><code>qpxc transform gene \\\n    --parquet-path ./output/psm.parquet \\\n    --fasta proteins.fasta \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#gene-example-partition","title":"With Partitioning","text":"<pre><code>qpxc transform gene \\\n    --parquet-path ./output/feature.parquet \\\n    --fasta tests/examples/fasta/Homo-sapiens.fasta \\\n    --output-folder ./output \\\n    --file-num 20 \\\n    --partitions reference_file_name \\\n    --species human\n</code></pre>"},{"location":"cli-transform/#gene-output","title":"Output Files","text":"<ul> <li>Output: Enhanced parquet file(s) with gene information</li> <li>Format: Parquet file in output folder</li> <li>Added Fields: Gene names and metadata from FASTA headers</li> </ul>"},{"location":"cli-transform/#gene-best-practices","title":"Best Practices","text":"<ul> <li>Use species-specific FASTA files for accurate gene annotation</li> <li>Adjust <code>--file-num</code> based on available memory for large files</li> <li>Use partitioning for better file organization in large datasets</li> </ul>"},{"location":"cli-transform/#ibaq","title":"ibaq","text":"<p>Convert feature data to iBAQ format.</p>"},{"location":"cli-transform/#ibaq-description","title":"Description","text":"<p>Transforms feature-level quantification data into iBAQ (intensity-Based Absolute Quantification)      format. This command integrates feature quantification with sample metadata from SDRF files to      generate iBAQ values.</p>"},{"location":"cli-transform/#ibaq-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--feature-file</code> FILE Yes - Feature file path <code>--sdrf-file</code> FILE Yes - SDRF file for metadata extraction <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No <code>ibaq</code> Prefix for output files"},{"location":"cli-transform/#ibaq-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#ibaq-example-basic","title":"Basic Example","text":"<p>Convert feature data to iBAQ format:</p> <pre><code>qpxc transform ibaq \\\n    --feature-file ./output/feature.parquet \\\n    --sdrf-file ./metadata.sdrf.tsv \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#ibaq-example-prefix","title":"With Custom Prefix","text":"<pre><code>qpxc transform ibaq \\\n    --feature-file ./output/feature.parquet \\\n    --sdrf-file ./metadata.sdrf.tsv \\\n    --output-folder ./output \\\n    --output-prefix ibaq_quantification\n</code></pre>"},{"location":"cli-transform/#ibaq-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.ibaq.parquet</code></li> <li>Format: Parquet file containing iBAQ quantification values</li> <li>Content: Protein-level iBAQ values per sample</li> </ul>"},{"location":"cli-transform/#ibaq-best-practices","title":"Best Practices","text":"<ul> <li>Ensure feature file contains all necessary quantification data</li> <li>Verify SDRF metadata matches sample identifiers in feature file</li> <li>Use iBAQ output for absolute protein quantification analysis</li> </ul>"},{"location":"cli-transform/#spectra","title":"spectra","text":"<p>Map spectrum information from mzML to parquet format.</p>"},{"location":"cli-transform/#spectra-description","title":"Description","text":"<p>Enriches PSM or feature data with additional spectral information extracted from mzML files.      This command maps spectrum metadata and peak information to the corresponding peptide-spectrum matches.</p>"},{"location":"cli-transform/#spectra-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--parquet-path</code> FILE Yes - PSM or feature parquet file path <code>--mzml-directory</code> DIRECTORY Yes - Directory containing mzML files <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--file-num</code> INTEGER No 10 Number of rows to read in each batch <code>--partitions</code> TEXT No - Fields for splitting files (comma-separated)"},{"location":"cli-transform/#spectra-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#spectra-example-basic","title":"Basic Example","text":"<p>Map spectrum information to parquet:</p> <pre><code>qpxc transform spectra \\\n    --parquet-path ./output/psm.parquet \\\n    --mzml-directory ./mzml_files \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#spectra-example-batch","title":"With Batch Processing and Partitioning","text":"<pre><code>qpxc transform spectra \\\n    --parquet-path ./output/psm.parquet \\\n    --mzml-directory ./mzml_files \\\n    --output-folder ./output \\\n    --file-num 20 \\\n    --partitions reference_file_name\n</code></pre>"},{"location":"cli-transform/#spectra-output","title":"Output Files","text":"<ul> <li>Output: Enhanced PSM/feature parquet file(s) with spectral information</li> <li>Format: Parquet file in output folder</li> <li>Added Fields: Spectrum metadata and peak information from mzML files</li> </ul>"},{"location":"cli-transform/#spectra-best-practices","title":"Best Practices","text":"<ul> <li>Ensure mzML files are in the specified directory with correct naming</li> <li>Adjust <code>--file-num</code> based on available memory and file size</li> <li>Use partitioning for organized output when processing large datasets</li> </ul>"},{"location":"cli-transform/#uniprot","title":"uniprot","text":"<p>Map feature data to latest UniProt version.</p>"},{"location":"cli-transform/#uniprot-description","title":"Description","text":"<p>Maps peptides and features to the latest UniProt protein database using a FASTA file.      This command updates protein identifications to match current UniProt accessions and annotations.</p>"},{"location":"cli-transform/#uniprot-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--feature-file</code> FILE Yes - Feature file path <code>--fasta</code> FILE Yes - UniProt FASTA file path <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No - Prefix for output files"},{"location":"cli-transform/#uniprot-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#uniprot-example-basic","title":"Basic Mapping","text":"<p>Map features to latest UniProt:</p> <pre><code>qpxc transform uniprot \\\n    --feature-file ./output/feature.parquet \\\n    --fasta uniprot_human.fasta \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#uniprot-example-prefix","title":"With Custom Prefix","text":"<pre><code>qpxc transform uniprot \\\n    --feature-file ./output/feature.parquet \\\n    --fasta ./uniprot_human_2024.fasta \\\n    --output-folder ./output \\\n    --output-prefix feature_updated\n</code></pre>"},{"location":"cli-transform/#uniprot-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.feature.parquet</code></li> <li>Format: Parquet file with updated UniProt mappings</li> <li>Content: Feature data mapped to latest UniProt protein identifications</li> </ul>"},{"location":"cli-transform/#uniprot-best-practices","title":"Best Practices","text":"<ul> <li>Use the latest UniProt FASTA file for most current annotations</li> <li>Run this command when updating to a new UniProt release</li> <li>Verify FASTA file matches the organism of your study</li> </ul>"},{"location":"cli-transform/#anndata","title":"anndata","text":"<p>Merge multiple AE files into a file in AnnData format.</p>"},{"location":"cli-transform/#anndata-description","title":"Description","text":"<p>Combines multiple absolute expression (AE) files from a directory into a single AnnData object      (H5AD format). This command is useful for integrating data from multiple experiments for      downstream analysis with scanpy or other Python-based tools.</p>"},{"location":"cli-transform/#anndata-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--directory</code> DIRECTORY Yes - The directory for storing AE files <code>--output-folder</code> DIRECTORY Yes - Output directory for generated files <code>--output-prefix</code> TEXT No - Prefix for output files"},{"location":"cli-transform/#anndata-examples","title":"Usage Examples","text":""},{"location":"cli-transform/#anndata-example-basic","title":"Basic Example","text":"<p>Merge AE files into AnnData format:</p> <pre><code>qpxc transform anndata \\\n    --directory ./ae_files \\\n    --output-folder ./output</code></pre>"},{"location":"cli-transform/#anndata-example-prefix","title":"With Custom Prefix","text":"<pre><code>qpxc transform anndata \\\n    --directory ./ae_files \\\n    --output-folder ./output \\\n    --output-prefix merged_ae\n</code></pre>"},{"location":"cli-transform/#anndata-output","title":"Output Files","text":"<ul> <li>Output: <code>{output-prefix}-{uuid}.h5ad</code></li> <li>Format: AnnData H5AD file (HDF5-based format)</li> <li>Structure:</li> <li><code>X</code>: Protein expression matrix</li> <li><code>obs</code>: Sample metadata</li> <li><code>var</code>: Protein metadata</li> </ul>"},{"location":"cli-transform/#anndata-use-cases","title":"Use Cases","text":"<ul> <li>Integration with scanpy for dimensionality reduction and clustering</li> <li>Compatibility with Python machine learning libraries</li> <li>Multi-experiment data integration</li> <li>Cross-study meta-analysis</li> </ul>"},{"location":"cli-transform/#anndata-best-practices","title":"Best Practices","text":"<ul> <li>Ensure all AE files in the directory have consistent format</li> <li>Validate sample metadata consistency before merging</li> <li>Use the output with scanpy or other AnnData-compatible tools</li> <li>Consider memory requirements for large datasets</li> </ul>"},{"location":"cli-transform/#related-commands","title":"Related Commands","text":"<ul> <li>Convert Commands - Convert raw data to QPX format</li> <li>Visualization Commands - Visualize transformed data</li> <li>Statistics Commands - Analyze transformed data</li> </ul>"},{"location":"cli-visualize/","title":"Visualization Commands","text":"<p>Create various data visualization plots from QPX data.</p> <p></p>"},{"location":"cli-visualize/#overview","title":"Overview","text":"<p>The <code>visualize</code> command group provides tools for creating publication-quality visualizations from QPX parquet files. All plots are saved in vector formats (SVG, PDF) for high-resolution output.</p>"},{"location":"cli-visualize/#available-commands","title":"Available Commands","text":"<p>All visualization commands are accessed through the <code>plot</code> subcommand:</p> <ul> <li>psm-peptides - Plot peptides by condition in LFQ</li> <li>ibaq-distribution - Plot iBAQ distribution</li> <li>kde-intensity - Plot KDE intensity distribution</li> <li>peptide-distribution - Plot peptide distribution across proteins</li> <li>box-intensity - Plot intensity box plots</li> </ul>"},{"location":"cli-visualize/#psm-peptides","title":"psm-peptides","text":"<p>Plot peptides by condition in label-free quantification (LFQ) experiments.</p>"},{"location":"cli-visualize/#psm-peptides-description","title":"Description","text":"<p>Creates a visualization showing the distribution of identified peptides across different      experimental conditions. This plot helps assess data quality and completeness across samples.</p>"},{"location":"cli-visualize/#psm-peptides-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--psm-parquet-path</code> FILE Yes - PSM parquet file path <code>--sdrf-path</code> FILE Yes - SDRF file path <code>--save-path</code> FILE Yes - Output image path (e.g. plot.svg)"},{"location":"cli-visualize/#psm-peptides-examples","title":"Usage Examples","text":""},{"location":"cli-visualize/#psm-peptides-example-basic","title":"Basic Example","text":"<p>Plot peptides by condition:</p> <pre><code>qpxc visualize plot psm-peptides \\\n    --psm-parquet-path ./output/psm.parquet \\\n    --sdrf-path ./metadata.sdrf.tsv \\\n    --save-path ./plots/peptides_by_condition.svg</code></pre>"},{"location":"cli-visualize/#psm-peptides-example-pdf","title":"Generate PDF Output","text":"<pre><code>qpxc visualize plot psm-peptides \\\n    --psm-parquet-path ./output/psm.parquet \\\n    --sdrf-path ./metadata.sdrf.tsv \\\n    --save-path ./plots/peptides_by_condition.pdf\n</code></pre>"},{"location":"cli-visualize/#psm-peptides-output","title":"Output","text":"<ul> <li>Format: SVG or PDF (based on file extension in <code>--save-path</code>)</li> <li>Content: Bar plot showing peptide counts per condition</li> <li>Axes:</li> <li>X-axis: Experimental conditions</li> <li>Y-axis: Number of identified peptides</li> </ul>"},{"location":"cli-visualize/#psm-peptides-interpretation","title":"Interpretation","text":"<ul> <li>High variation: May indicate batch effects or quality issues</li> <li>Low counts: May suggest technical problems with specific samples</li> <li>Consistent counts: Indicates good data quality and reproducibility</li> </ul>"},{"location":"cli-visualize/#psm-peptides-best-practices","title":"Best Practices","text":"<ul> <li>Use SVG format for publications (scalable vector graphics)</li> <li>Verify SDRF metadata correctly defines experimental conditions</li> <li>Compare with expected peptide yields for your sample type</li> </ul>"},{"location":"cli-visualize/#ibaq-distribution","title":"ibaq-distribution","text":"<p>Plot the distribution of iBAQ (intensity-Based Absolute Quantification) values.</p>"},{"location":"cli-visualize/#ibaq-distribution-description","title":"Description","text":"<p>Creates a histogram or density plot showing the distribution of iBAQ values across proteins.      Useful for quality control and understanding the dynamic range of protein quantification.</p>"},{"location":"cli-visualize/#ibaq-distribution-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--ibaq-path</code> FILE Yes - iBAQ file path <code>--save-path</code> FILE Yes - Output image path (e.g. plot.svg) <code>--select-column</code> TEXT No - Selected column in iBAQ file"},{"location":"cli-visualize/#ibaq-distribution-examples","title":"Usage Examples","text":""},{"location":"cli-visualize/#ibaq-distribution-example-all","title":"Plot All Samples","text":"<p>Plot iBAQ distribution:</p> <pre><code>qpxc visualize plot ibaq-distribution \\\n    --ibaq-path ibaq_data.tsv \\\n    --save-path ./plots/ibaq_distribution.svg</code></pre>"},{"location":"cli-visualize/#ibaq-distribution-example-specific","title":"Plot Specific Sample","text":"<pre><code>qpxc visualize plot ibaq-distribution \\\n    --ibaq-path tests/examples/AE/PXD016999.1-ibaq.tsv \\\n    --select-column Sample_001 \\\n    --save-path ./plots/ibaq_sample001.svg\n</code></pre>"},{"location":"cli-visualize/#ibaq-distribution-output","title":"Output","text":"<ul> <li>Format: SVG or PDF</li> <li>Content: Distribution plot (histogram + kernel density estimate)</li> <li>Axes:</li> <li>X-axis: log10(iBAQ intensity)</li> <li>Y-axis: Density or frequency</li> </ul>"},{"location":"cli-visualize/#ibaq-distribution-interpretation","title":"Interpretation","text":"<ul> <li>Bimodal distribution: May indicate distinct protein abundance classes</li> <li>Long tail: High-abundance proteins (housekeeping, abundant structural proteins)</li> <li>Narrow range: Limited dynamic range, possible detection issues</li> </ul>"},{"location":"cli-visualize/#ibaq-distribution-best-practices","title":"Best Practices","text":"<ul> <li>Log-transform intensities for better visualization</li> <li>Compare distributions across samples to identify outliers</li> <li>Check for batch effects if distributions vary significantly</li> </ul>"},{"location":"cli-visualize/#kde-intensity","title":"kde-intensity","text":"<p>Plot Kernel Density Estimation (KDE) of intensity distributions across samples.</p>"},{"location":"cli-visualize/#kde-intensity-description","title":"Description","text":"<p>Creates overlaid KDE plots showing intensity distributions for multiple samples, enabling      visual comparison of sample-to-sample variability and batch effects.</p>"},{"location":"cli-visualize/#kde-intensity-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--feature-path</code> FILE Yes - Feature file path <code>--save-path</code> FILE Yes - Output image path (e.g. plot.svg) <code>--num-samples</code> INTEGER No 10 Number of samples to plot"},{"location":"cli-visualize/#kde-intensity-examples","title":"Usage Examples","text":""},{"location":"cli-visualize/#kde-intensity-example-default","title":"Plot Default Samples","text":"<p>Plot KDE intensity distribution:</p> <pre><code>qpxc visualize plot kde-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/intensity_kde.svg</code></pre>"},{"location":"cli-visualize/#kde-intensity-example-more","title":"Plot More Samples","text":"<pre><code>qpxc visualize plot kde-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/intensity_kde_all.svg \\\n    --num-samples 20\n</code></pre>"},{"location":"cli-visualize/#kde-intensity-output","title":"Output","text":"<ul> <li>Format: SVG or PDF</li> <li>Content: Overlaid KDE curves for each sample</li> <li>Axes:</li> <li>X-axis: log10(intensity)</li> <li>Y-axis: Density</li> <li>Legend: Sample identifiers</li> </ul>"},{"location":"cli-visualize/#kde-intensity-interpretation","title":"Interpretation","text":"<ul> <li>Overlapping curves: Good sample-to-sample consistency</li> <li>Shifted curves: Potential batch effects or normalization issues</li> <li>Different shapes: Sample-specific technical issues</li> </ul>"},{"location":"cli-visualize/#kde-intensity-best-practices","title":"Best Practices","text":"<ul> <li>Limit to 10-20 samples for readability</li> <li>Use this plot to identify samples requiring normalization</li> <li>Compare before and after normalization</li> </ul>"},{"location":"cli-visualize/#peptide-distribution","title":"peptide-distribution","text":"<p>Plot the distribution of peptides across proteins.</p>"},{"location":"cli-visualize/#peptide-distribution-description","title":"Description","text":"<p>Visualizes how many peptides are identified for each protein, providing insights into      protein coverage and identification confidence.</p>"},{"location":"cli-visualize/#peptide-distribution-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--feature-path</code> FILE Yes - Feature file path <code>--save-path</code> FILE Yes - Output image path (e.g. plot.svg) <code>--num-samples</code> INTEGER No 20 Number of samples to plot"},{"location":"cli-visualize/#peptide-distribution-examples","title":"Usage Examples","text":""},{"location":"cli-visualize/#peptide-distribution-example-basic","title":"Basic Example","text":"<p>Plot peptide distribution:</p> <pre><code>qpxc visualize plot peptide-distribution \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/peptide_per_protein.svg</code></pre>"},{"location":"cli-visualize/#peptide-distribution-example-top50","title":"Show Top 50 Proteins","text":"<pre><code>qpxc visualize plot peptide-distribution \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/peptide_per_protein_top50.svg \\\n    --num-samples 50\n</code></pre>"},{"location":"cli-visualize/#peptide-distribution-output","title":"Output","text":"<ul> <li>Format: SVG or PDF</li> <li>Content: Bar plot showing peptide counts per protein</li> <li>Axes:</li> <li>X-axis: Protein identifiers (top N by peptide count)</li> <li>Y-axis: Number of identified peptides</li> </ul>"},{"location":"cli-visualize/#peptide-distribution-interpretation","title":"Interpretation","text":"<ul> <li>High peptide counts: Abundant proteins with good coverage</li> <li>Single peptide proteins: May be less confident identifications</li> <li>Distribution shape: Reflects proteome complexity</li> </ul>"},{"location":"cli-visualize/#peptide-distribution-best-practices","title":"Best Practices","text":"<ul> <li>Focus on top proteins for initial quality assessment</li> <li>Filter single-peptide identifications for high-confidence datasets</li> <li>Compare expected vs. observed peptide counts for key proteins</li> </ul>"},{"location":"cli-visualize/#box-intensity","title":"box-intensity","text":"<p>Plot box plots of intensity distributions across samples.</p>"},{"location":"cli-visualize/#box-intensity-description","title":"Description","text":"<p>Creates box plots showing the distribution of feature intensities for each sample, ideal      for identifying outliers and assessing normalization quality.</p>"},{"location":"cli-visualize/#box-intensity-parameters","title":"Parameters","text":"ParameterTypeRequiredDefaultDescription <code>--feature-path</code> FILE Yes - Feature file path <code>--save-path</code> FILE Yes - Output image path (e.g. plot.svg) <code>--num-samples</code> INTEGER No 10 Number of samples to plot"},{"location":"cli-visualize/#box-intensity-examples","title":"Usage Examples","text":""},{"location":"cli-visualize/#box-intensity-example-basic","title":"Basic Example","text":"<p>Plot box intensity distribution:</p> <pre><code>qpxc visualize plot box-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/intensity_boxplot.svg</code></pre>"},{"location":"cli-visualize/#box-intensity-example-all","title":"Plot All Samples","text":"<pre><code>qpxc visualize plot box-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/intensity_boxplot_all.svg \\\n    --num-samples 50\n</code></pre>"},{"location":"cli-visualize/#box-intensity-output","title":"Output","text":"<ul> <li>Format: SVG or PDF</li> <li>Content: Box plots for each sample</li> <li>Axes:</li> <li>X-axis: Sample identifiers</li> <li>Y-axis: log10(intensity)</li> <li>Elements: Box (IQR), whiskers (1.5\u00d7IQR), outliers (points)</li> </ul>"},{"location":"cli-visualize/#box-intensity-interpretation","title":"Interpretation","text":"<ul> <li>Aligned medians: Good normalization</li> <li>Similar IQR: Consistent quantification across samples</li> <li>Many outliers: May indicate contamination or technical issues</li> <li>Different ranges: Batch effects or loading differences</li> </ul>"},{"location":"cli-visualize/#box-intensity-best-practices","title":"Best Practices","text":"<ul> <li>Use this plot to identify samples requiring normalization</li> <li>Check for systematic differences between batches or conditions</li> <li>Compare before and after normalization to verify effectiveness</li> <li>Flag samples with unusual distributions for further investigation</li> </ul>"},{"location":"cli-visualize/#general-plotting-tips","title":"General Plotting Tips","text":""},{"location":"cli-visualize/#output-formats","title":"Output Formats","text":"<ul> <li>SVG: Recommended for publications (scalable, editable)</li> <li>PDF: Alternative vector format (portable)</li> <li>PNG: Raster format (not recommended for publications)</li> </ul>"},{"location":"cli-visualize/#color-considerations","title":"Color Considerations","text":"<ul> <li>Plots use color-blind friendly palettes by default</li> <li>Ensure sufficient contrast for grayscale printing</li> </ul>"},{"location":"cli-visualize/#size-and-resolution","title":"Size and Resolution","text":"<ul> <li>Vector formats (SVG/PDF) scale without quality loss</li> <li>Suitable for both presentations and manuscripts</li> </ul>"},{"location":"cli-visualize/#customization","title":"Customization","text":"<p>For advanced customization beyond these commands, consider:</p> <ol> <li>Exporting data to CSV and using custom plotting scripts</li> <li>Using the qpx Python API for programmatic access</li> <li>Importing SVG files into vector graphics editors</li> </ol>"},{"location":"cli-visualize/#related-commands","title":"Related Commands","text":"<ul> <li>Convert Commands - Prepare data for visualization</li> <li>Transform Commands - Process data before plotting</li> <li>Statistics Commands - Generate numeric summaries</li> </ul>"},{"location":"community/","title":"Community &amp; Support","text":""},{"location":"community/#get-help","title":"Get Help","text":"<ul> <li>Documentation: Browse the complete documentation on this site</li> <li>GitHub Issues: Report bugs or request features</li> </ul>"},{"location":"community/#contributing","title":"Contributing","text":"<p>We welcome contributions! Here's how you can help:</p> <ol> <li>Report bugs: Open an issue with details</li> <li>Suggest features: Propose new capabilities</li> <li>Submit code: Fork the repository, develop, and create a pull request</li> <li>Improve docs: Help make documentation clearer by submitting PRs</li> </ol>"},{"location":"community/#core-contributors","title":"Core Contributors","text":"<ul> <li>Yasset Perez-Riverol - PRIDE Team, EMBL-EBI, UK</li> <li>Ping Zheng - Chongqing University of Posts and Telecommunications, China</li> </ul>"},{"location":"community/#license","title":"License","text":"<p>This project is licensed under the Apache-2.0 License.</p> <pre><code>Copyright 2024 PRIDE Team, EMBL-EBI\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\n</code></pre> <p>For the full license text, see the LICENSE file in the repository.</p>"},{"location":"community/#acknowledgments","title":"Acknowledgments","text":"<p>This project is supported by:</p> <ul> <li>PRIDE Team at EMBL-EBI</li> <li>Chongqing Key Laboratory of Big Data for Bio Intelligence</li> </ul> <p>We thank all contributors and users who help make QPX better!</p>"},{"location":"examples-integration/","title":"Integration Examples","text":"<p>Examples of integrating qpx with other tools and frameworks.</p>"},{"location":"examples-integration/#nextflow-pipeline-integration","title":"Nextflow Pipeline Integration","text":"<p>Real production Nextflow pipeline from the QPX project for processing MaxQuant PSM data.</p>"},{"location":"examples-integration/#pipeline-features","title":"Pipeline Features","text":"<ul> <li>Converts Thermo RAW files to mzML format using ThermoRawFileParser</li> <li>Processes MaxQuant PSM data to QPX parquet format</li> <li>Extracts spectral information from mzML files</li> <li>Supports containerization (Docker/Singularity)</li> <li>Configurable resource allocation for HPC environments</li> <li>Automatic error handling and completion reporting</li> </ul>"},{"location":"examples-integration/#run-the-pipeline","title":"Run the Pipeline","text":"<pre><code># Using Docker\nnextflow run nf-mq-psm.nf -profile docker\n\n# Using Singularity\nnextflow run nf-mq-psm.nf -profile singularity\n\n# With custom parameters\nnextflow run nf-mq-psm.nf \\\n    --raw_dir ./raw_files \\\n    --mzml_dir ./mzml_output \\\n    --output_dir ./results \\\n    --msms_file ./maxquant/msms.txt \\\n    --chunksize 2000000 \\\n    -profile docker\n</code></pre> <p>Full pipeline source: nextflow/nf-mq-psm/</p>"},{"location":"examples-integration/#python-api-usage","title":"Python API Usage","text":"<p>Use qpx programmatically in Python scripts.</p> <pre><code>#!/usr/bin/env python3\n\"\"\"\nComplete proteomics data processing using qpx Python API\n\"\"\"\n\nimport logging\nfrom pathlib import Path\nfrom qpx.core.maxquant.maxquant import MaxQuant\nfrom qpx.core.ae import AbsoluteExpressionHander\nfrom qpx.operate.statistics import ParquetStatistics, IbaqStatistics\nfrom qpx.operate.plots import (\n    plot_intensity_box_of_samples,\n    plot_peptide_distribution_of_protein\n)\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\ndef main():\n    # Define paths\n    raw_dir = Path(\"data/raw\")\n    output_dir = Path(\"output\")\n    plots_dir = Path(\"plots\")\n\n    # Create directories\n    output_dir.mkdir(exist_ok=True)\n    plots_dir.mkdir(exist_ok=True)\n\n    # Step 1: Convert MaxQuant PSM data\n    logger.info(\"Converting MaxQuant PSM data...\")\n    mq = MaxQuant(spectral_data=False)\n    psm_output = output_dir / \"psm.parquet\"\n    mq.process_psm_file(\n        msms_path=str(raw_dir / \"msms.txt\"),\n        output_path=str(psm_output),\n        chunksize=1000000\n    )\n\n    # Step 2: Convert feature data\n    logger.info(\"Converting MaxQuant feature data...\")\n    feature_output = output_dir / \"feature.parquet\"\n    mq.process_feature_file(\n        evidence_path=str(raw_dir / \"evidence.txt\"),\n        output_path=str(feature_output),\n        sdrf_path=str(raw_dir / \"experiment.sdrf.tsv\"),\n        chunksize=1000000\n    )\n\n    # Step 3: Calculate absolute expression\n    logger.info(\"Calculating absolute expression...\")\n    ae_handler = AbsoluteExpressionHander()\n    ae_handler.load_ibaq_file(str(raw_dir / \"ibaq.tsv\"))\n    ae_handler.load_sdrf_file(str(raw_dir / \"experiment.sdrf.tsv\"))\n    ae_handler.convert_ibaq_to_quantms(\n        output_folder=str(output_dir),\n        output_file_prefix=\"ae\"\n    )\n\n    # Step 4: Generate statistics\n    logger.info(\"Generating statistics...\")\n    psm_stats = ParquetStatistics(str(psm_output))\n    print(f\"Number of proteins: {psm_stats.get_number_of_proteins()}\")\n    print(f\"Number of peptides: {psm_stats.get_number_of_peptides()}\")\n    print(f\"Number of PSMs: {psm_stats.get_number_of_psms()}\")\n\n    # Step 5: Create visualizations\n    logger.info(\"Creating visualizations...\")\n    plot_intensity_box_of_samples(\n        str(feature_output),\n        str(plots_dir / \"intensity_box.svg\"),\n        num_samples=20\n    )\n\n    plot_peptide_distribution_of_protein(\n        str(feature_output),\n        str(plots_dir / \"peptide_dist.svg\"),\n        num_samples=50\n    )\n\n    logger.info(\"Processing complete!\")\n    logger.info(f\"Output files: {output_dir}/\")\n    logger.info(f\"Plots: {plots_dir}/\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre> <p>\u2190 Back to Examples Overview | View QC Examples \u2192</p>"},{"location":"examples-overview/","title":"Examples &amp; Tutorials","text":"<p>Learn how to use qpx through practical examples and real-world use cases.</p>"},{"location":"examples-overview/#available-examples","title":"Available Examples","text":""},{"location":"examples-overview/#quick-start-examples","title":"Quick Start Examples","text":"<p>Basic examples for getting started with qpx:</p> <ul> <li>Convert MaxQuant Data</li> <li>Convert DIA-NN Data</li> <li>Absolute Expression Analysis</li> </ul>"},{"location":"examples-overview/#workflow-examples","title":"Workflow Examples","text":"<p>Complete workflows for different analysis scenarios:</p> <ul> <li>Label-Free Quantification (LFQ) Workflow</li> <li>Differential Expression Analysis</li> <li>End-to-end processing pipelines</li> </ul>"},{"location":"examples-overview/#integration-examples","title":"Integration Examples","text":"<p>Integration with other tools and frameworks:</p> <ul> <li>Nextflow Pipeline Integration</li> <li>Python API Usage</li> <li>Automation scripts</li> </ul>"},{"location":"examples-overview/#quality-control-examples","title":"Quality Control Examples","text":"<p>Generate comprehensive QC reports:</p> <ul> <li>Statistics generation</li> <li>QC visualizations</li> <li>HTML report creation</li> </ul> <p>Need more examples? Check the <code>tests/examples/</code> directory in the repository for real data files you can use for testing.</p>"},{"location":"examples-qc/","title":"Quality Control Examples","text":"<p>Generate comprehensive QC reports with statistics and visualizations.</p>"},{"location":"examples-qc/#comprehensive-qc-report","title":"Comprehensive QC Report","text":"<p>Generate a complete QC report with statistics and visualizations.</p> <pre><code>#!/bin/bash\n\nOUTPUT_DIR=\"output\"\nQC_DIR=\"qc_report\"\nmkdir -p $QC_DIR\n\n# Generate statistics\necho \"=== PSM Statistics ===\" &gt; $QC_DIR/report.txt\nqpxc stats analyze psm \\\n    --parquet-path $OUTPUT_DIR/psm.parquet \\\n    &gt;&gt; $QC_DIR/report.txt\n\necho \"\" &gt;&gt; $QC_DIR/report.txt\necho \"=== Project Statistics ===\" &gt;&gt; $QC_DIR/report.txt\nqpxc stats analyze project-ae \\\n    --absolute-path $OUTPUT_DIR/ae.parquet \\\n    --parquet-path $OUTPUT_DIR/psm.parquet \\\n    &gt;&gt; $QC_DIR/report.txt\n\n# Generate QC plots\nqpxc visualize plot box-intensity \\\n    --feature-path $OUTPUT_DIR/feature.parquet \\\n    --save-path $QC_DIR/intensity_boxplot.svg\n\nqpxc visualize plot kde-intensity \\\n    --feature-path $OUTPUT_DIR/feature.parquet \\\n    --save-path $QC_DIR/intensity_kde.svg\n\nqpxc visualize plot peptide-distribution \\\n    --feature-path $OUTPUT_DIR/feature.parquet \\\n    --save-path $QC_DIR/peptide_distribution.svg\n\nqpxc visualize plot ibaq-distribution \\\n    --ibaq-path $OUTPUT_DIR/ae.parquet \\\n    --save-path $QC_DIR/ibaq_distribution.svg\n\n# Create HTML report\ncat &gt; $QC_DIR/index.html &lt;&lt; 'EOF'\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;qpx QC Report&lt;/title&gt;\n    &lt;style&gt;\n        body { font-family: Arial, sans-serif; margin: 20px; }\n        h1 { color: #2c3e50; }\n        h2 { color: #34495e; margin-top: 30px; }\n        pre { background: #f4f4f4; padding: 15px; border-radius: 5px; }\n        img { max-width: 100%; height: auto; margin: 20px 0; }\n        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }\n    &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;qpx Quality Control Report&lt;/h1&gt;\n\n    &lt;h2&gt;Statistics&lt;/h2&gt;\n    &lt;pre&gt;\n$(cat report.txt)\n    &lt;/pre&gt;\n\n    &lt;h2&gt;Visualizations&lt;/h2&gt;\n    &lt;div class=\"grid\"&gt;\n        &lt;div&gt;\n            &lt;h3&gt;Intensity Box Plot&lt;/h3&gt;\n            &lt;img src=\"intensity_boxplot.svg\" alt=\"Intensity Box Plot\"&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;h3&gt;Intensity KDE&lt;/h3&gt;\n            &lt;img src=\"intensity_kde.svg\" alt=\"Intensity KDE\"&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;h3&gt;Peptide Distribution&lt;/h3&gt;\n            &lt;img src=\"peptide_distribution.svg\" alt=\"Peptide Distribution\"&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;h3&gt;iBAQ Distribution&lt;/h3&gt;\n            &lt;img src=\"ibaq_distribution.svg\" alt=\"iBAQ Distribution\"&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nEOF\n\necho \"QC report generated: $QC_DIR/index.html\"\n</code></pre>"},{"location":"examples-qc/#related-documentation","title":"Related Documentation","text":"<ul> <li>CLI Reference - Complete command documentation</li> <li>Format Specification - Data format details</li> <li>GitHub Repository - Source code and more examples</li> </ul> <p>Need more examples? Check the <code>tests/examples/</code> directory in the repository for real data files you can use for testing.</p> <p>\u2190 Back to Examples Overview</p>"},{"location":"examples-quickstart/","title":"Quick Start Examples","text":""},{"location":"examples-quickstart/#example-1-convert-maxquant-data","title":"Example 1: Convert MaxQuant Data","text":"<p>Convert MaxQuant output files to QPX format.</p> <pre><code># Convert PSM data\nqpxc convert maxquant-psm \\\n    --msms-file tests/examples/maxquant/maxquant_simple/msms.txt \\\n    --output-folder ./output\n\n# Convert feature data\nqpxc convert maxquant-feature \\\n    --evidence-file tests/examples/maxquant/maxquant_full/evidence.txt.gz \\\n    --sdrf-file tests/examples/maxquant/maxquant_full/PXD001819.sdrf.tsv \\\n    --protein-groups-file tests/examples/maxquant/maxquant_full/proteinGroups.txt \\\n    --output-folder ./output\n\n# Convert protein groups\nqpxc convert maxquant-pg \\\n    --protein-groups-file tests/examples/maxquant/maxquant_full/proteinGroups.txt \\\n    --sdrf-file tests/examples/maxquant/maxquant_full/PXD001819.sdrf.tsv \\\n    --output-folder ./output\n</code></pre> <p>Expected Output:</p> <ul> <li><code>output/psm-{uuid}.psm.parquet</code></li> <li><code>output/feature-{uuid}.feature.parquet</code></li> <li><code>output/pg-{uuid}.pg.parquet</code></li> </ul>"},{"location":"examples-quickstart/#example-2-convert-dia-nn-data","title":"Example 2: Convert DIA-NN Data","text":"<p>Process DIA-NN report files for Data-Independent Acquisition (DIA) data.</p> <pre><code># Convert to feature format\nqpxc convert diann \\\n    --report-path tests/examples/diann/small/diann_report.tsv \\\n    --qvalue-threshold 0.05 \\\n    --mzml-info-folder tests/examples/diann/small/mzml \\\n    --sdrf-path tests/examples/diann/small/PXD019909-DIA.sdrf.tsv \\\n    --output-folder ./output\n\n# Convert to protein group format\nqpxc convert diann-pg \\\n    --report-path tests/examples/diann/full/diann_report.tsv.gz \\\n    --pg-matrix-path tests/examples/diann/full/diann_report.pg_matrix.tsv \\\n    --sdrf-path tests/examples/diann/full/PXD036609.sdrf.tsv \\\n    --output-folder ./output\n</code></pre> <p>Expected Output:</p> <ul> <li><code>output/feature-{uuid}.feature.parquet</code></li> <li><code>output/pg-{uuid}.pg.parquet</code></li> </ul>"},{"location":"examples-quickstart/#example-3-absolute-expression-analysis","title":"Example 3: Absolute Expression Analysis","text":"<p>Calculate absolute protein expression from iBAQ data.</p> <pre><code>qpxc transform ae \\\n    --ibaq-file tests/examples/AE/PXD016999.1-ibaq.tsv \\\n    --sdrf-file tests/examples/AE/PXD016999-first-instrument.sdrf.tsv \\\n    --project-file tests/examples/AE/project.json \\\n    --output-folder ./output \\\n    --output-prefix ae_analysis\n</code></pre> <p>Expected Output:</p> <ul> <li><code>output/ae_analysis-{uuid}.absolute.parquet</code></li> </ul> <p>\u2190 Back to Examples Overview | View Workflows \u2192</p>"},{"location":"examples-workflows/","title":"Workflow Examples","text":"<p>Complete processing workflows for different analysis scenarios.</p>"},{"location":"examples-workflows/#complete-label-free-quantification-lfq-workflow","title":"Complete Label-Free Quantification (LFQ) Workflow","text":"<p>Process a complete LFQ experiment from raw MaxQuant output to publication-ready results.</p> <pre><code>#!/bin/bash\n\n# Define paths\nRAW_DIR=\"data/raw\"\nOUTPUT_DIR=\"output\"\nPLOTS_DIR=\"plots\"\nREPORTS_DIR=\"reports\"\nPROJECT_DIR=\"project\"\n\n# Create directories\nmkdir -p $OUTPUT_DIR $PLOTS_DIR $REPORTS_DIR $PROJECT_DIR\n\n# Step 1: Convert MaxQuant data\necho \"Converting MaxQuant data...\"\nqpxc convert maxquant-psm \\\n    --msms-file $RAW_DIR/msms.txt \\\n    --output-folder $OUTPUT_DIR \\\n    --verbose\n\nqpxc convert maxquant-feature \\\n    --evidence-file $RAW_DIR/evidence.txt.gz \\\n    --sdrf-file $RAW_DIR/experiment.sdrf.tsv \\\n    --protein-groups-file $RAW_DIR/proteinGroups.txt \\\n    --output-folder $OUTPUT_DIR \\\n    --verbose\n\nqpxc convert maxquant-pg \\\n    --protein-groups-file $RAW_DIR/proteinGroups.txt \\\n    --sdrf-file $RAW_DIR/experiment.sdrf.tsv \\\n    --output-folder $OUTPUT_DIR \\\n    --verbose\n\n# Step 2: Calculate absolute expression\necho \"Calculating absolute expression...\"\nqpxc transform ae \\\n    --ibaq-file $RAW_DIR/ibaq.tsv \\\n    --sdrf-file $RAW_DIR/experiment.sdrf.tsv \\\n    --output-folder $OUTPUT_DIR\n\n# Step 3: Generate statistics\necho \"Generating statistics...\"\nqpxc stats analyze psm \\\n    --parquet-path $OUTPUT_DIR/psm-*.psm.parquet \\\n    --save-path $REPORTS_DIR/psm_statistics.txt\n\nqpxc stats analyze project-ae \\\n    --absolute-path $OUTPUT_DIR/ae-*.absolute.parquet \\\n    --parquet-path $OUTPUT_DIR/psm-*.psm.parquet \\\n    --save-path $REPORTS_DIR/project_statistics.txt\n\n# Step 4: Create visualizations\necho \"Creating visualizations...\"\nqpxc visualize plot box-intensity \\\n    --feature-path $OUTPUT_DIR/feature-*.feature.parquet \\\n    --save-path $PLOTS_DIR/intensity_boxplot.svg \\\n    --num-samples 20\n\nqpxc visualize plot peptide-distribution \\\n    --feature-path $OUTPUT_DIR/feature-*.feature.parquet \\\n    --save-path $PLOTS_DIR/peptide_distribution.svg\n\nqpxc visualize plot ibaq-distribution \\\n    --ibaq-path $OUTPUT_DIR/ae-*.absolute.parquet \\\n    --save-path $PLOTS_DIR/ibaq_distribution.svg\n\n# Step 5: Create project metadata\necho \"Creating project metadata...\"\nqpxc project create \\\n    --project-accession PXD001234 \\\n    --sdrf-file $RAW_DIR/experiment.sdrf.tsv \\\n    --output-folder $PROJECT_DIR \\\n    --software-name MaxQuant \\\n    --software-version 2.0.3.0\n\necho \"Workflow complete!\"\necho \"Results:\"\necho \"  - Converted data: $OUTPUT_DIR/\"\necho \"  - Statistics: $REPORTS_DIR/\"\necho \"  - Plots: $PLOTS_DIR/\"\necho \"  - Project metadata: $PROJECT_DIR/project.json\"\n</code></pre>"},{"location":"examples-workflows/#differential-expression-analysis-workflow","title":"Differential Expression Analysis Workflow","text":"<p>Analyze differential expression from MSstats output.</p> <pre><code>#!/bin/bash\n\n# Convert differential expression data\nqpxc transform differential \\\n    --msstats-file tests/examples/DE/PXD033169.sdrf_openms_design_msstats_in_comparisons.csv \\\n    --sdrf-file tests/examples/DE/PXD033169.sdrf.tsv \\\n    --project-file tests/examples/DE/project.json \\\n    --fdr-threshold 0.05 \\\n    --output-folder ./output \\\n    --verbose\n\necho \"Differential expression analysis complete!\"\n</code></pre> <p>\u2190 Back to Examples Overview | View Integration Examples \u2192</p>"},{"location":"features/","title":"Key Features","text":""},{"location":"features/#data-conversion","title":"Data Conversion","text":"<p>Convert data from leading proteomics software to standardized QPX format:</p> <ol> <li> <p>MaxQuant result files:</p> </li> <li> <p><code>msms.txt</code>: MS/MS scan information (PSM data)</p> </li> <li><code>evidence.txt</code>: Peptide evidence (Feature data)</li> <li><code>proteinGroups.txt</code>: Protein identification results</li> <li> <p><code>*.sdrf.tsv</code>: SDRF-Proteomics metadata (optional)</p> </li> <li> <p>DIA-NN result files:</p> </li> <li> <p><code>report.tsv</code> or <code>report.parquet</code>: DIA-NN main report</p> </li> <li><code>pg_matrix.tsv</code>: Protein group matrix</li> <li><code>*.sdrf.tsv</code>: SDRF-Proteomics metadata (optional)</li> <li> <p><code>*ms_info.parquet</code>: mzML statistics folder (optional)</p> </li> <li> <p>FragPipe result files:</p> </li> <li> <p><code>psm.tsv</code>: PSM identifications</p> </li> <li> <p><code>*.sdrf.tsv</code>: SDRF-Proteomics metadata (optional)</p> </li> <li> <p>OpenMS/idXML files:</p> </li> <li> <p><code>*.idXML</code>: Identification results</p> </li> <li> <p><code>*.mzML</code>: Corresponding spectra files (optional, for batch processing)</p> </li> <li> <p>mzTab (quantms pipeline) files:</p> </li> <li> <p><code>*.mzTab</code>: Standard proteomics format (PSM/PEP/PRT sections)</p> </li> <li><code>*msstats*.csv</code>: MSstats/MSstatsTMT input files (optional)</li> </ol> <p>Output format: All conversions produce standardized parquet files:</p> <ul> <li>PSM: <code>*-psm.parquet</code></li> <li>Feature: <code>*-feature.parquet</code></li> <li>Protein Group: <code>*-pg.parquet</code></li> </ul> <p>View all converters \u2192</p>"},{"location":"features/#data-transformation","title":"Data Transformation","text":"<p>Transform and enrich your data:</p> <ul> <li>Absolute Expression (AE): iBAQ-based absolute quantification</li> <li>Differential Expression (DE): MSstats statistical analysis</li> <li>Gene Mapping: Add gene annotations</li> <li>UniProt Integration: Latest protein annotations</li> <li>AnnData Export: Integration with single-cell tools</li> </ul> <p>View all transformations \u2192</p>"},{"location":"features/#visualization","title":"Visualization","text":"<p>Generate publication-quality plots:</p> <ul> <li>Intensity distributions (KDE, box plots)</li> <li>Peptide distribution analysis</li> <li>iBAQ distribution plots</li> <li>Quality control visualizations</li> </ul> <p>View visualization tools \u2192</p>"},{"location":"features/#statistical-analysis","title":"Statistical Analysis","text":"<p>Comprehensive data statistics:</p> <ul> <li>PSM data statistics (proteins, peptides, PSMs count)</li> <li>Project-level absolute expression statistics</li> <li>Sample-level quantitative metrics</li> <li>Automated report generation</li> </ul> <p>View statistical tools \u2192</p>"},{"location":"features/#project-management","title":"Project Management","text":"<p>Track and share your work:</p> <ul> <li>PRIDE Archive integration</li> <li>Project metadata management</li> <li>File registration and tracking</li> </ul> <p>View project tools \u2192</p>"},{"location":"format-specification/","title":"The QPX format specification","text":""},{"location":"format-specification/#executive-summary","title":"1. Executive Summary","text":"<p>The QPX format is a modern, scalable data format designed specifically for proteomics data analysis. It addresses the limitations of existing formats like XML-based HUPO-PSI standards (mzML, mzIdentML) and tab-delimited formats like mzTab, which struggle with large-scale datasets and advanced analytical use cases.</p>"},{"location":"format-specification/#11-key-benefits","title":"1.1. Key Benefits","text":"<ul> <li>Performance: Leverages columnar storage (Apache Parquet) to achieve significant improvements in storage efficiency (up to 70% reduction) and query performance.</li> <li>Scalability: Designed to handle large-scale proteomics datasets with efficient slicing and partitioning capabilities.</li> <li>Flexibility: Supports multiple \"views\" of proteomics data (PSMs, features, proteins) that can be serialized in different formats.</li> <li>AI/ML Ready: Structured to facilitate machine learning applications with standardized representation of spectra, identifications, and quantifications.</li> <li>Integration: Enables seamless integration with sample metadata and other omics data types.</li> </ul>"},{"location":"format-specification/#12-core-components","title":"1.2. Core Components","text":"<p>The format consists of several interconnected views:</p> <ul> <li>Identification Views: PSM (Peptide Spectrum Matches), peptide features, and protein groups</li> <li>Quantification Views: Absolute and differential expression matrices</li> <li>Metadata Views: Project information and sample metadata (SDRF)</li> <li>Spectra View: Mass spectra data optimized for efficient storage and retrieval</li> </ul> <p>Each view can be serialized in appropriate formats (Parquet for complex data, TSV for matrices, JSON for metadata), creating a comprehensive ecosystem for proteomics data representation.</p>"},{"location":"format-specification/#13-current-status","title":"1.3. Current Status","text":"<p>The QPX format is currently at version 1.0 and is primarily implemented in the quantms workflow. It has been successfully applied to various proteomics datasets, demonstrating significant improvements in storage efficiency and analysis capabilities compared to traditional formats.</p> <p>NOTE</p> <p>We are not trying to do the following:</p> <ul> <li>Replace the mzTab format, but to provide a new format that enables AI-related use cases.</li> <li>Replace all the software tools file formats and intermediate files, but to provide a new format that enables easy integration of the main output results with other tools.</li> </ul>"},{"location":"format-specification/#introduction","title":"2. Introduction","text":"<p>The majority of formats in HUPO-PSI are based on XML format including mzML, mzIdentML making difficult to use them for large-scale, AI model technologies. Also, the previous approach to move away from XML-based approaches, mzTab \"falls short\" to produce a tab-delimited format that can scale with the size of the data. Here, we aim to formalize and develop a more standardized format that enables better representation of the identification and quantification results but also enables new and novel use cases for proteomics data analysis. The main use cases for the format are:</p> <ul> <li>Fast and easy visualization of the identification and quantification results.</li> <li>Easy integration with other omics data.</li> <li>Easy integration with sample metadata.</li> <li>AI/ML model development based on identification and quantification results.</li> <li>Easy data retrieval for big datasets and large-scale collections of proteomics data.</li> </ul> <p>NOTE</p> <p>We are not trying to do the following:</p> <ul> <li>Replace the mzTab format, but to provide a new format that enables AI-related use cases.</li> <li>Replace all the software tools file formats and intermediate files, but to provide a new format that enables easy integration of the main output results with other tools.</li> </ul>"},{"location":"format-specification/#general-data-model","title":"3. General data model and structure","text":"<p>The <code>QPX</code> (.qms) could be seen as a multiple view representation of a proteomics data analysis results. Similar to other tools that produce multiple output files for their analysis, like MaxQuant, DIA-NN, FragPipe or spectronaut. Each view of the format can be serialized in different formats depending on the use case. The data model defines two main things, the view and how the view is serialized. Both views and serialization can be extended, and new views can be added on each version of the specification.</p> <p></p> <ul> <li>The data model view defines the structure, the fields and properties that will be included in a view for each peptide, psms, feature or protein.</li> <li>The data serialization defines the format in which the view will be serialized and what features of serialization will be supported, for example, compression, indexing, or slicing.</li> </ul> view file class serialization format definition mz mz_file parquet mz psm psm_file parquet psm feature feature_file parquet feature pg pg_file parquet pg peptide peptide_file parquet peptide protein protein_file parquet protein absolute absolute_file tsv absolute differential differential_file tsv differential sdrf sdrf_file tsv sdrf project - json project <p>NOTE</p> <p>Some of these data models fit better for some analytical methods than others, for example, the psm view psm is more suitable for data-dependent acquisition (DDA) methods, and may not be present in data-independent acquisition (DIA) methods; while the feature view feature could be generated in both DDA and DIA methods. Different expression view differential are only present in those experiments while absolute-expression (based on IBAQ values) is only available on datasets where comparisons are not performed between conditions.</p> <p>The <code>.qms</code> contains all the files of a QPX experiment. It will contain metadata files and different views of the experiments; general-data-model. {#file-structure}</p>"},{"location":"format-specification/#common-data-structures","title":"4. Common data structures and formats","text":"<p>We have some concepts that are common for some outputs and would be good to define and explain them here:</p>"},{"location":"format-specification/#peptidoform","title":"4.1. Peptidoform","text":"<p>A peptidoform is a peptide sequence with modifications. For example, the peptide sequence <code>PEPTIDM</code> with a modification of <code>Oxidation</code> would be <code>PEPTIDM[Oxidation]</code>. The peptidoform show be written using the Proforma specification. This concept is used in the following outputs:</p> <ul> <li>psm</li> <li>feature</li> <li>peptide</li> </ul>"},{"location":"format-specification/#modifications","title":"4.2. Modifications","text":"<p>A modification is a chemical change in the peptide sequence. Modifications can be annotated in multiple ways in <code>QPX</code> format:</p> <ol> <li> <p>As part of the Proforma notation inside the peptide sequence:</p> </li> <li> <p>Example: <code>PEPT[Oxidation]IDE[Phospho]</code></p> </li> <li>Uses modification name or accession (e.g., <code>Oxidation</code> or <code>UNIMOD:35</code>)</li> <li>RECOMMENDED to use UNIMOD accessions</li> <li> <p>For non-UNIMOD modifications, use CHEMMOD format: <code>CHEMMOD:-18.0913</code> (mass shift in Daltons)</p> </li> <li> <p>As a structured representation with position-specific scores:</p> </li> </ol> <pre><code>{\n  \"name\": \"Oxidation\",\n  \"accession\": \"UNIMOD:35\",\n  \"positions\": [\n    {\n      \"position\": \"M.4\", // Format: {AA}.{position}\n      \"scores\": [\n        {\n          \"score_name\": \"localization_probability\",\n          \"score_value\": 0.99 // Float value\n        }\n      ]\n    }\n  ]\n}\n</code></pre> <p>Position Format:</p> <ul> <li>Amino acid modifications: <code>{AA}.{position}</code> (e.g., \"M.4\" for Met at position 4)</li> <li>N-terminal modifications: \"N-term.0\"</li> <li>C-terminal modifications: \"C-term.{length+1}\"</li> </ul> <p>Scores are associated with specific positions, allowing for:</p> <ul> <li>Localization probabilities</li> <li>Position-specific confidence scores</li> <li>Other position-dependent metrics</li> </ul> <p>NOTE</p> <ul> <li>Positions are 1-based for amino acids</li> <li>N-terminal modifications use position 0</li> <li>C-terminal modifications use position length+1</li> <li>Each position can have multiple associated scores</li> <li>Score values are always float numbers</li> </ul>"},{"location":"format-specification/#scan","title":"4.3. Scan","text":"<p>Scan number (<code>scan</code>) aims to point to the MS/MS in a Raw, mzML, or peak list file (e.g., MGF). mzIdentML, mzTab, USI, and another HUPO-PSI standardization have different ways to use and define scan <code>number</code>. Here we will use the latest definition from USI. A single <code>scan</code> point to an MS/MS in the spectra file. The <code>scan</code> is a unique identifier, and it could be a number or a string depending on the instrument.</p> <ul> <li> <p>AB Sciex: <code>sample=1 period=1 cycle=2740 experiment=10</code> -&gt; <code>1,1,2740,10</code>. In this scenario, where reference to the original scan event is desired but a single scan number is not sufficient, then we use <code>nativeId</code> mechanism.</p> </li> <li> <p>Waters nativeId: <code>function=10 process=1 scan=345</code> -&gt; <code>10,1,345</code></p> </li> <li> <p>Bruker nativeId: <code>frame=120 scan=475</code> -&gt; <code>120,475</code></p> </li> <li> <p>Thermo scan : <code>controllerType=0 controllerNumber=1 scan=43920</code> -&gt; <code>43920</code></p> </li> </ul> <p>Note: since the controllerType and controllerNumber are always 0 and 1 for mass spectra. In rare cases, if either controllerType is not 0 or controllerNumber is not 1 (e.g., a PDA spectrum is being referenced), then the nativeId form MUST be used: <code>controllerType=5 controllerNumber=1 scan=7</code> -&gt; <code>5,1,7</code></p> <p>The <code>scan</code> is use in the following section: psm, feature, mz.</p> <p>NOTE</p> <p>Normally the scan value is only captured in the column, while the format of the scan: <code>nativeId</code>, <code>scan</code> or <code>index</code> should be captured in the metadata of the file. However, in some types of analyses we may have more than one type of scan in the same file, (e.g., when merging multiple experiments.), in this case, each scan MUST be prefixed by the type of scan. For example, <code>nativeId:1,1,2740,10</code>, <code>scan:43920</code>.</p>"},{"location":"format-specification/#identification-scores","title":"4.4. Identification scores","text":"<p>Every workflow within quantms uses different identification/quantification scores to determinate the quality of the identification or the quantification. <code>additional_scores</code> in quantms try to capture multiple scores from different workflows such as the <code>Comet:xcorr</code> or <code>DIA-NN:Q.Value</code>. Additional scores are stored as a key/value pair where the key is the name of the score (is RECOMMENDED to use HUPO-PSI MS ontology) and the value is the score value. This concept is used in the following outputs:</p> <ul> <li><code>[Comet:xcorr:67.8\", DIA-NN:Q.Value:0.01]</code></li> </ul> <p>This concept is used in the following outputs:</p> <ul> <li>psm</li> <li>feature</li> <li>peptide</li> </ul>"},{"location":"format-specification/#cv-terms","title":"4.5. Controlled vocabulary terms","text":"<p>The following views psm, feature, mz use controlled vocabularies to describe the data. The controlled vocabulary terms are used to standardize the data and make it easier to integrate with other datasets. The controlled vocabulary terms are stored as a key/value pair where the key is the name of the controlled vocabulary term and the value is the term value. This concept is used in the following outputs:</p> <ul> <li><code>[\"ms level\": \"2\", \"deconvoluted data\": null]</code></li> </ul> <p>The name/key of the controlled vocabulary MUST be provided; the value is optional.</p>"},{"location":"format-specification/#serialization","title":"5. Serialization formats","text":"<p>The <code>QPX</code> format has different serialization formats for each view. The serialization format defines how the view will be serialized and what features of serialization will be supported, for example, compression, indexing, or slicing. The following serialization formats are supported:</p> <ul> <li>tsv: Tab-separated values format.</li> <li>parquet: Apache Parquet format.</li> <li>json: JavaScript Object Notation format.</li> </ul>"},{"location":"format-specification/#parquet-format","title":"5.1. Parquet format","text":"<p>Parquet is a columnar storage format that supports nested data. Apache Parquet is an open-source format designed for efficient data storage and retrieval. It offers high-performance compression and encoding schemes, making it well-suited for handling large volumes of complex data. Parquet is widely supported across various programming languages and analytics tools.</p> <p>Apache Parquet includes two types of metadata: file metadata and column metadata. File metadata contains pointers to the starting locations of all the column metadata, while column metadata holds location information for the individual column chunks. Readers first access the file metadata to find the column chunks they need, then use the column metadata to efficiently skip over irrelevant pages.</p> <p>A Parquet table can be distributed across multiple compute nodes, and its key advantage is that applications can quickly jump to the relevant fields in a record using metadata. For large-scale analyses, Parquet has helped users reduce storage requirements by at least one-third on large datasets. Additionally, it significantly improves scan and deserialization times (important for web-based use cases), thus reducing overall costs.</p> <p>[cols=\"6*\", options=\"header\"] | Project | Type | Original file size(GB) | Converted parquet size(MB) | Writing psm time(s) | Writing feature time(s) | | --- | --- | --- | --- | --- | --- | | PXD046440 | maxquant | 48 | 337/343 | 985.2671835 | 678.474133 | | PXD016999 | mzTab | 160 | 155/228 | 539.0019641 | 3554.52738 | | PXD019909 | diaNN | 1.9 | 195 | | 229.482332 |</p>"},{"location":"format-specification/#parquet-features","title":"Parquet features","text":"<ul> <li>Columnar Storage: Parquet's columnar design improves compression and query performance by storing data by columns rather than rows, which reduces I/O for analytical queries that typically access only a few columns.</li> <li>Efficient Compression: The format achieves better compression ratios with algorithms like Snappy, Gzip, and LZO, and uses techniques like RLE, and dictionary encoding for further optimization.</li> <li>Schema Evolution: Parquet supports adding, deleting, or modifying columns without affecting existing data, making it adaptable to schema changes.</li> <li>Complex Data Types: Supports nested structures and data types like arrays, maps, and structs, allowing efficient storage of complex data.</li> </ul>"},{"location":"format-specification/#parquet-slicing","title":"Parquet slicing","text":"<p><code>QPX</code> supports slicing parquet files using any field when generating them.Upon storage, the files are organized into distinct folders according to the chosen slicing fields.</p> <pre><code>PXD004683/\n\u2502\n\u251c\u2500\u2500 sample_accession_1/\n\u2502   \u251c\u2500\u2500 file1.parquet\n\u2502   \u2514\u2500\u2500 file2.parquet\n\u2502\n\u251c\u2500\u2500 sample_accession_2/\n\u2502   \u251c\u2500\u2500 file3.parquet\n\u2502   \u2514\u2500\u2500 file4.parquet\n\u2502\n\u2514\u2500\u2500 sample_accession_3/\n    \u251c\u2500\u2500 file5.parquet\n    \u2514\u2500\u2500 file6.parquet\n...\n</code></pre> <p>When registering parquet files to project.json project, it will be in such a format.</p> <pre><code>  \"quantms_files\": [\n    {\n      \"feature_file\": [\n        {\n          \"path_name\": \"PXD004683\",\n          \"is_folder\": true,\n          \"partition_fields\": [\"sample_accession\"]\n        }\n      ]\n    },\n  ]\n</code></pre>"},{"location":"format-specification/#extensions","title":"6. File extensions","text":"<p>File extensions are used to identify the file type. In <code>QPX</code> the extensions are constructed as follows: <code>*.{view}.{format}</code> where the view is one of the well-defined views in the specification and the format is one of the serialization formats. For example:</p> <ul> <li>An absolute expression file: <code>PXD000000-943a8f02-0527-4528-b1a3-b96de99ebe75.absolute.tsv</code></li> <li>A differential expression file: <code>PXD000000-943a8f02-0527-4528-b1a3-b96de99ebe75.differential.tsv</code></li> <li>A feature file: <code>PXD000000-943a8f02-0527-4528-b1a3-b96de99ebe75.feature.parquet</code></li> <li>A psm file: <code>PXD000000-943a8f02-0527-4528-b1a3-b96de99ebe75.psm.parquet</code></li> </ul> <p>NOTE</p> <p>In <code>QPX</code> we use the UUID to identify the project and the files <code>{PREFIX}-{UUID}.{view}.{format}</code>, it is optional, but for most of the code examples we will use it. uuids: A Universally Unique Identifier (UUID) URN Namespace, as defined in RFC 4122, provides a standardized method for generating globally unique identifiers across various systems and applications. The UUID URN Namespace ensures that each generated UUID is highly unlikely to collide with any other UUID, even when produced by different entities and systems.</p>"},{"location":"format-specification/#version","title":"7. Versioning","text":"<p>The structure of the version is as follows <code>{major release}.{minor update}</code>: The current <code>QPX</code> specification version is: 1.0</p> <ul> <li>All views (psm, feature, pg) and serialization formats will have a version number in the way: <code>qpx_version: {}</code>. This will help to identify the version of the specification used to generate the file.</li> <li>Major release changes will be backward incompatible, while minor updates will be backward compatible.</li> </ul>"},{"location":"format-specification/#software","title":"8. Software provider","text":"<p>The data within QPX is mainly generated from quantms workflow. However, the format is open and can be used by any software provider that wants to generate the data in this format. The software provider and the version of the software used to generate the data will be stored in the project view project as:</p> <pre><code>\"software_provider\": {\n    \"name\": \"quantms\",\n    \"version\": \"1.3.0\"\n  }\n</code></pre>"},{"location":"format-specification/#project","title":"9. Project QPX","text":"<p>The project view is the file that stores the metadata of the entire <code>QPX</code> project. The project view is a JSON file that contains the following fields:</p>"},{"location":"format-specification/#91-project-fields","title":"9.1. Project fields","text":"Field Description Type <code>project_accession</code> Project accession identifier string <code>project_title</code> Title of the project string <code>project_description</code> Description of the project string <code>project_sample_description</code> Description of the project sample string <code>project_data_description</code> Description of the project data string <code>project_pubmed_id</code> PubMed ID associated with the project int32 <code>organisms</code> List of Organisms involved in the project list[string], null <code>organism_parts</code> Parts of Organisms studied list[string], null <code>diseases</code> Diseases associated with the study list[string], null <code>cell_lines</code> Cell lines used in the study list[string], null <code>instruments</code> Instruments used for data acquisition list[string] <code>enzymes</code> Enzymes used in the study list[string] <code>experiment_type</code> Types of experiments conducted list[string] <code>acquisition_properties</code> Properties of the data acquisition methods list[key/value] <code>quantms_files</code> Files related to quantMS analysis list[key/value] <code>qpx_version</code> Version of the <code>QPX</code> string <code>software_provider</code> The <code>&lt;software&gt;</code> used to generate the data key/value <code>comments</code> Additional comments or notes list[string] <ul> <li>key/value pair object: The key/value pairs are used to store the acquisition properties, and the quantms files.</li> </ul> <p>Example of <code>acquisition_properties</code>:</p> <pre><code>   \"acquisition_properties\": [\n        {\"precursor tolerance\": \"0.05 Da\"},\n        {\"dissociation method\": \"HCD\"}\n   ]\n</code></pre>"},{"location":"format-specification/#92-project-files","title":"9.2. Project files","text":"<p>The files within a project are in the current version version optional. Files within a project should be listed in the quantms_files, for every file the following information is necessary:</p> <ul> <li>path_name: The name of the file or folder.</li> <li>is_folder: A boolean value that indicates if the file is a folder or not.</li> <li>partition_fields: The fields that are used to partition the data in the file. This is used to optimize the data retrieval and filtering of the data. This field is optional.</li> </ul> <p>NOTE</p> <p>Parquet files can be storage as folders when the data is partitioned by some fields. For example, a parquet file that is partitioned by the <code>sample_accession</code> field will be stored as a folder with the name of the field and the value of the field.</p> <p>Example of <code>quantms_files</code>:</p> <pre><code>{\n  \"quantms_files\": [\n    {\n      \"psm_file\": [\n        {\n          \"path_name\": \"PXD004683-550e8400-e29b-41d4.1.psm.parquet\",\n          \"is_folder\": false\n        },\n        {\n          \"path_name\": \"PXD004683-550e8400-e29b-41d4.2.psm.parquet\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"feature_file\": [\n        {\n          \"path_name\": \"PXD004683\",\n          \"is_folder\": true,\n          \"partition_fields\": [\"sample_accession\"]\n        }\n      ]\n    },\n    {\n      \"differential_file\": [\n        {\n          \"path_name\": \"PXD004683-a716.differential.tsv\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"absolute_file\": [\n        {\n          \"path_name\": \"PXD004683-e29b-41f4-a716.absolute.tsv\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"sdrf_file\": [\n        {\n          \"path_name\": \"PXD004683-e29b-41f4-a716.sdrf.tsv\",\n          \"is_folder\": false\n        }\n      ]\n    }\n  ]\n}\n</code></pre> <p>Example:</p> <pre><code>{\n  \"project_accession\": \"PXD014414\",\n  \"project_title\": \"\",\n  \"project_sample_description\": \"\",\n  \"project_data_description\": \"\",\n  \"project_pubmed_id\": 32265444,\n  \"organisms\": [\"Homo sapiens\"],\n  \"organism_parts\": [\"mammary gland\", \"adjacent normal tissue\"],\n  \"diseases\": [\n    \"metaplastic breast carcinomas\",\n    \"Triple-negative breast cancer\",\n    \"Normal\",\n    \"not applicable\"\n  ],\n  \"cell_lines\": [\"not applicable\"],\n  \"instruments\": [\"Orbitrap Fusion\"],\n  \"enzymes\": [\"Trypsin\"],\n  \"experiment_type\": [\n    \"Triple-negative breast cancer\",\n    \"Wisp3\",\n    \"Tandem mass tag (tmt) labeling\",\n    \"Ccn6\",\n    \"Metaplastic breast carcinoma\",\n    \"Precision therapy\",\n    \"Lc-ms/ms shotgun proteomics\"\n  ],\n  \"acquisition_properties\": [\n    { \"proteomics data acquisition method\": \"TMT\" },\n    { \"proteomics data acquisition method\": \"Data-dependent acquisition\" },\n    { \"dissociation method\": \"HCD\" },\n    { \"precursor mass tolerance\": \"20 ppm\" },\n    { \"fragment mass tolerance\": \"0.6 Da\" }\n  ],\n  \"quantms_files\": [\n    {\n      \"feature_file\": [\n        {\n          \"path_name\": \"PXD014414.feature.parquet\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"sdrf_file\": [\n        {\n          \"path_name\": \"PXD014414.sdrf.tsv\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"psm_file\": [\n        {\n          \"path_name\": \"PXD014414-f4fb88f6.psm.parquet\",\n          \"is_folder\": false\n        }\n      ]\n    },\n    {\n      \"differential_file\": [\n        {\n          \"path_name\": \"PXD014414-3026e5d5.differential.tsv\",\n          \"is_folder\": false\n        }\n      ]\n    }\n  ],\n  \"software_provider\": {\n    \"name\": \"quantms\",\n    \"version\": \"1.3.0\"\n  },\n  \"qpx_version\": \"1.0\",\n  \"comments\": []\n}\n</code></pre>"},{"location":"format-specification/#sdrf","title":"10. SDRF view","text":"<p>The Proteomics Sample and Data Relationship Format (SDRF) is a tab-delimited file format that describes the relationship between samples, data files, and the experimental factors. The SDRF is a key file in the proteomics data analysis workflow as it describes the relationship between the samples and the data files. The specification of the SDRF can be found in the SDRF GitHub repository.</p>"},{"location":"format-specification/#absolute","title":"11. Absolute quantification view","text":"<p>Absolute quantification is the process of determining the absolute/baseline amount of a target protein in a sample. In proteomics, the main computational method to determine the absolute quantification is the intensity-based absolute quantification (iBAQ) method.</p>"},{"location":"format-specification/#111-absolute-quantification-use-cases","title":"11.1. Absolute quantification use cases","text":"<ul> <li>Fast and easy visualization absolute expression (AE) results using iBAQ values.</li> <li>Store the AE results of each protein on each sample.</li> <li>It could be used as a proxy to understand the expression profile of a protein in different conditions, tissues and organisms.</li> </ul>"},{"location":"format-specification/#112-format","title":"11.2. Format","text":"<p>The absolute expression format is a tab-delimited file format that contains the following fields:</p> <ul> <li><code>protein</code> -&gt; Protein accession or semicolon-separated list of accessions for indistinguishable groups</li> <li><code>sample_accession</code> -&gt; Sample accession in the SDRF.</li> <li><code>condition</code> -&gt; Condition name</li> <li><code>ibaq</code> -&gt; iBAQ value</li> <li><code>ibaq_normalized</code> -&gt; Relative iBAQ value, Ibaq value normalized by the sum of the iBAQ values in the sample.</li> </ul> <p>Example:</p> protein sample_accession condition ibaq ibaq_normalized LV861_HUMAN Sample-1 heart 1234.1 12.34"},{"location":"format-specification/#ae-header","title":"AE header","text":"<p>We based the AE format (absolute) and DE (differential) based on MSstats and other genomics formats such as VCF. By default, the MSstats format does not have any header of metadata. We suggest adding a header to the output for better understanding of the file. By default, MSstats allows comments in the file if the line starts with <code>#</code>. The quantms output will start with some key value pairs that describe the project, the workflow and also the columns in the file. For</p> <p>Example:</p> <p><code>#project_accession=PXD000000</code></p> <p>In addition, for each <code>Default</code> column of the matrix the following information should be added:</p> <pre><code>#INFO=&lt;ID=protein, Number=inf, Type=String, Description=\"Protein Accession\"&gt;\n#INFO=&lt;ID=sample_accession, Number=1, Type=String, Description=\"Sample Accession in the SDRF\"&gt;\n#INFO=&lt;ID=condition, Number=1, Type=String, Description=\"Value of the factor value\"&gt;\n#INFO=&lt;ID=ibaq, Number=1, Type=Float, Description=\"Intensity based absolute quantification\"&gt;\n#INFO=&lt;ID=ibaq_normalized, Number=1, Type=Float, Description=\"normalized iBAQ\"&gt;\n</code></pre> <ul> <li>The <code>ID</code> is the column name in the matrix, the <code>Number</code> is the number of values in the column (separated by <code>;</code>), the <code>Type</code> is the type of the values in the column and the <code>Description</code> is a description of the column. The number of values in the column can go from 1 to <code>inf</code> (infinity).</li> <li>Protein groups are written as a list of protein accessions separated by <code>;</code> (e.g.<code>P12345;P12346</code>)</li> </ul> <p>We RECOMMEND including the following properties in the header:</p> <ul> <li><code>project_accession</code>: The project accession in PRIDE Archive</li> <li><code>project_title</code>: The project title in PRIDE Archive</li> <li><code>project_description</code>: The project description in PRIDE Archive</li> <li><code>qpx_version</code>: The version of the qpx used to generate the file</li> <li><code>factor_value</code>: The factor values used in the analysis (e.g.<code>tissue</code>)</li> </ul> <p>Please check also the differential expression example for more information: differential</p>"},{"location":"format-specification/#anndata","title":"12. AnnData view","text":"<p>The AnnData view is a collection of multiple AE files. Its obs represents the samples, var represents the proteins, and the conditions are stored in obs.</p> <ul> <li>Retrieve all the proteins for a given sample.</li> <li>Obtain all samples under the same condition.</li> </ul> <p></p>"},{"location":"format-specification/#differential","title":"13. Differential expression view","text":"<p>The differential expression view is a tab-delimited file format that contains the differential expression results between two contrasts, with the corresponding fold changes and p-values. The differential expression view is a key file in the proteomics data analysis workflow as it describes the differential expression between two conditions.</p>"},{"location":"format-specification/#131-differential-expression-use-cases","title":"13.1. Differential expression use cases","text":"<ul> <li>Store the differential express proteins between two contrasts, with the corresponding fold changes and p-values.</li> <li>Enable easy visualization using tools like Volcano Plots.</li> <li>Enable easy integration with other omics data resources.</li> <li>Store metadata information about the project, the workflow and the columns in the file.</li> </ul>"},{"location":"format-specification/#132-format","title":"13.2. Format","text":"<p>The differential expression format by QPX is based on the MSstats output:</p> <ul> <li><code>protein</code> -&gt; Protein Accession</li> <li><code>label</code> -&gt; Label for the contrast on which the fold changes and p-values are based on</li> <li><code>log2fc</code> -&gt; Log2 Fold Change</li> <li><code>se</code> -&gt; Standard error of the log2 fold change</li> <li><code>df</code> -&gt; Degree of freedom of the t-student test</li> <li><code>pvalue</code> -&gt; Raw p-values</li> <li><code>adj_pvalue</code> -&gt; P-values adjusted among all the proteins in the specific comparison using the approach by Benjamini and Hochberg</li> <li><code>issue</code> -&gt; Issue column shows if there is any issue for inference in corresponding protein and comparison, for example, OneConditionMissing or CompleteMissing.</li> </ul> <p>Example:</p> protein label log2fc se df pvalue adj_pvalue issue ADA2_HUMAN normal - squamous cell carcinoma 0.3057 0.26 37 0.02 0.43"},{"location":"format-specification/#de-header","title":"DE header","text":"<p>By default, the MSstats format does not have any header of metadata. We suggest adding a header to the output for better understanding of the file. By default, MSstats allows comments in the file if the line starts with <code>#</code>. The quantms output will start with some key value pairs that describe the project, the workflow and also the columns in the file. For example:</p> <p><code>#project_accession=PXD000000</code></p> <p>In addition, for each <code>Default</code> column of the matrix the following information should be added:</p> <pre><code>#INFO=&lt;ID=protein, Number=inf, Type=String, Description=\"Protein Accession\"&gt;\n#INFO=&lt;ID=label, Number=1, Type=String, Description=\"Label for the Conditions combination\"&gt;\n#INFO=&lt;ID=log2fc, Number=1, Type=Double, Description=\"Log2 Fold Change\"&gt;\n#INFO=&lt;ID=se, Number=1, Type=Double, Description=\"Standard error of the log2 fold change\"&gt;\n#INFO=&lt;ID=df, Number=1, Type=Integer, Description=\"Degree of freedom of the Student test\"&gt;\n#INFO=&lt;ID=pvalue, Number=1, Type=Double, Description=\"Raw p-values\"&gt;\n#INFO=&lt;ID=adj_pvalue, Number=1, Type=Double, Description=\"P-values adjusted among all the proteins in the specific comparison using the approach by Benjamini and Hochberg\"&gt;\n#INFO=&lt;ID=issue, Number=1, Type=String, Description=\"Issue column shows if there is any issue for inference in corresponding protein and comparison\"&gt;\n</code></pre> <ul> <li>The <code>ID</code> is the column name in the matrix, the <code>Number</code> is the number of values in the column (separated by <code>;</code>), the <code>Type</code> is the type of the values in the column and the <code>Description</code> is a description of the column. The number of values in the column can go from 1 to <code>inf</code> (infinity).</li> <li>Protein groups are written as a list of protein accessions separated by <code>;</code> (e.g. `P12345;P12346``)</li> </ul> <p>We suggest including the following properties in the header:</p> <ul> <li><code>project_accession</code>: The project accession in PRIDE Archive</li> <li><code>project_title</code>: The project title in PRIDE Archive</li> <li><code>project_description</code>: The project description in PRIDE Archive</li> <li><code>qpx_version</code>: The version of the qpx used to generate the file.</li> <li><code>factor_value</code>: The factor values used in the analysis (e.g. <code>phenotype</code>)</li> <li><code>adj_pvalue</code>: The FDR threshold used to filter the protein lists (e.g. <code>adj_pvalue &lt; 0.05</code>)</li> </ul>"},{"location":"format-specification/#peptide-views","title":"14. Peptide-based Views: psm, feature and peptide","text":"<p>Multiple peptide-level views are available for the <code>QPX</code> format. The views are the following:</p> <ul> <li> <p>psm: Peptide Spectrum Match (psm) View\u2014The psm view aims to cover detail on Peptide spectrum matches (psm) level for AI/ML training and other use-cases, mainly for DDA analytical methods.</p> </li> <li> <p>feature: Peptide Feature View\u2014The peptide feature views (peptide features) aims to cover detail on quantified peptide information level, including peptide intensity in relation to the sample metadata.</p> </li> <li> <p>peptide: Peptide View\u2014The peptide view is a summary of quantified peptides by samples, the aim of this representation is to provide a simple summary of the number of peptides and their given quantity for each protein on each sample. This view is useful for quick visualization and data retrieval.</p> </li> </ul>"},{"location":"format-specification/#psm","title":"14.1. Peptide spectrum match (psm) view","text":"<p>Peptide spectrum matches (psms) are the results of the identification of peptides in mass spectrometry data. PSMs are mainly the results of peptide identification by database search engines on data-dependent acquisition (DDA) experiments.</p>"},{"location":"format-specification/#psm-use-cases","title":"Psm use cases","text":"<ul> <li>The psm table aims to cover detail on psm level for AI/ML use-cases.</li> <li>Most of the content is similar to mzTab, a psm would a peptide identification in a msrun file.</li> <li>We included in the psm view the spectrum information as optional for those use cases that want to have fast access to peptide information + spectrum data, for example, clustering or intensity prediction</li> <li>Fast and easy visualization of PSM information.</li> </ul>"},{"location":"format-specification/#psm-fields","title":"PSM fields","text":"<p>The following table presents all the fields and attributes for each PSM (Peptide Spectrum Match) entry in the psm_file. Some fields are shared between the psm, feature and peptide views.</p> <p>For reference, we've included the corresponding field names in common proteomics tools:</p> <ul> <li>MaxQuant: Fields from msms.txt</li> <li>FragPipe: Fields from psm.tsv</li> <li>DIA-NN: Fields from report.tsv</li> <li>mzTab: Fields from PSM section</li> </ul>"},{"location":"format-specification/#psm-core-fields","title":"Core Identification Fields","text":"<p>Note: These fields are shared with features and peptides.</p> Field Description Type DIA-NN FragPipe MaxQuant mzTab <code>sequence</code> Unmodified peptide sequence (amino acid sequence only) string Stripped.Sequence Peptide Sequence sequence <code>peptidoform</code> Complete peptide sequence with modifications in ProForma notation (see peptidoform) string Modified.Sequence Modified Peptide Modified sequence opt_global_cv_MS:1000889_peptidoform_sequence <code>modifications</code> Structured representation of modifications including name, position, and localization probability (see modifications) array[struct], null - - - - <code>precursor_charge</code> Charge state of the precursor ion int32 Precursor.Charge - Charge charge <code>posterior_error_probability</code> Posterior error probability (PEP) for the given peptide or psm match. float32, null PEP - PEP opt_global_Posterior_Error_Probability_score <code>is_decoy</code> Decoy indicator, 1 if the peptide is a decoy, 0 target int32 - - Reverse opt_global_cv_MS:1002217_decoy_peptide <code>calculated_mz</code> Theoretical peptide mass-to-charge ratio based on an identified sequence and modifications float32 - Calculated M/Z - calc_mass_to_charge <code>observed_mz</code> Experimental peptide mass-to-charge ratio of identified peptide (in Da) float32 - Observed M/Z m/z exp_mass_to_charge <code>rt</code> MS2 scan's precursor retention time (in seconds) float32, null RT - Retention time retention_time <code>predicted_rt</code> Predicted retention time of the peptide (in seconds) float32, null Predicted.RT - - - <code>reference_file_name</code> Spectrum file name with no path information and not including the file extension string Run Spectrum File Raw file spectra_ref <code>scan</code> Scan index (number of nativeId) of the spectrum identified: read scan string scan-diann Spectrum MS/MS scan number spectra_ref <code>additional_scores</code> List of structures, each structure contains two fields: name and value. array[struct{name: string, value: float32}] DIA-NN Scores FragPipe Scores MaxQuant Scores search_engine_score <code>cv_params</code> Optional list of CV parameters for additional metadata psm-cv-params array[struct{cv_name:string, cv_value:string}], null - - - -"},{"location":"format-specification/#psm-protein-fields","title":"Protein Mapping Fields","text":"Field Description Type DIA-NN FragPipe MaxQuant mzTab <code>protein_accessions</code> Protein accessions of all the proteins that the peptide maps to array[string], null Protein.Ids - Proteins accession"},{"location":"format-specification/#psm-spectral-fields","title":"Spectral Data Fields","text":"<p>Note: These fields are optional for use cases requiring spectrum-level information.</p> Field Description Type DIA-NN FragPipe MaxQuant mzTab <code>ion_mobility</code> Ion mobility value for the precursor ion float, null - - - - <code>number_peaks</code> Number of peaks in the spectrum used for the peptide spectrum match int32, null - - - - <code>mz_array</code> Array of m/z values for the spectrum used for the peptide spectrum match array[float], null - - - - <code>intensity_array</code> Array of intensity values for the spectrum used for the peptide spectrum match array[float], null - - - - <code>charge_array</code> Array of fragment ion charge values for the spectrum used for the peptide spectrum match array[int], null - - - - <code>ion_type_array</code> Array of fragment ion type annotations (e.g., b, y, a) for the spectrum used for the peptide spectrum match array[string], null - - - - <code>ion_mobility_array</code> Array of fragment ion mobility values for the spectrum used for the peptide spectrum match array[float], null - - - -"},{"location":"format-specification/#additional-scores","title":"Additional scores","text":"<p>Additional scores are stored as a list of key-value pairs, where the key is the name of the score (is RECOMMENDED to use HUPO-PSI MS ontology) and the value is the score value. Additional scores are mainly the search engine and protein scores that want to be added at PSM level. Some RECOMMENDED scores are:</p> <ul> <li>pg_global_qvalue: Protein group global q-value used to filter the psm at the level of the protein group and experiment.</li> <li>rank: Rank of the peptide in the search engine results. (1.0)</li> <li>global_qvalue: Global q-value of the PSM at the level of the experiment.</li> </ul> <p>NOTE</p> <ul> <li> <p>Psm view is NOT RECOMMENDED to be generated for DIA methods because it will be duplicated information with the feature view. The psm view is more suitable for DDA methods where the psm is the main output of the identification process.</p> </li> <li> <p>Protein inference SHOULD NOT be included in the psm view, as it is not the main purpose of the psm view. However, for some use cases like peptide filtering, search, etc., maybe interesting to have access to all the psms for a given protein accession, you can include that in the <code>protein_accessions</code>: protein group accessions. Another two protein-related fields can help the users to understand the resulted psm table, <code>unique</code> (if the peptide only maps to one protein), <code>pg_global_qvalue</code> (protein group q-value) that can be added to the <code>additional_scores</code> field.</p> </li> <li> <p>The <code>mz_array</code> and <code>intensity_array</code> are arrays of the same length, where the <code>mz_array</code> contains the m/z values and the <code>intensity_array</code> contains the intensity values; and the size of the arrays is the same as the number of peaks in the spectrum. These three columns could help use cases like AI/ML that need the spectrum information for a given psm. We RECOMMEND using for spectra data the mz view (mz), where the spectra are stored in a more efficient way.</p> </li> </ul>"},{"location":"format-specification/#psm-cv-params","title":"Psm CV parameters","text":"<p>Cv params are a key-value pairs list that allows to store additional information for a given psm. For example, it could be used to store the following, mzIdentML information:</p> <ul> <li>'prot:FDR threshold': 0.01</li> <li>number of unmatched peaks: 3</li> </ul> <p>In quantms we use <code>consensus_support</code> where the value is the number of search engines that support the identification. This field could be added as an additional_score as: <code>consensus_result: 3</code></p> <p>The cv_params are stored as a list of key-value pairs, where the key is the name of the parameter, and the value is the value of the parameter. This is similar to the CVParams in the mzIdentML format. Please, be aware that search engine scores should be stored for psms in the column <code>additional_scores</code>.</p>"},{"location":"format-specification/#psm-file-metadata","title":"Psm file metadata","text":"<p>For parquet psm files, the metadata of the file including QPX version and other metadata should be stored in the file. The metadata should be stored in the file as a key/value pair. The metadata should include the following fields:</p> <ul> <li><code>qpx_version</code>: The version of the QPX format used to generate the file.</li> <li><code>software_provider</code>: The software provider and the version of the software used to generate the data.</li> <li><code>project_accession</code>: The project accession in PRIDE Archive if available.</li> <li><code>project_title</code>: The project title in PRIDE Archive if available.</li> <li><code>project_description</code>: The project description in PRIDE Archive if available.</li> <li><code>scan_format</code>: The format of the scan, with possible values: <code>scan</code>, <code>index</code>, <code>nativeId</code>, <code>multiple</code>. Multiple is used when multiple experiments are merged into one file.</li> <li><code>creator</code>: Name of the tool or person who created the file.</li> <li><code>file_type</code> Type of the file (psm_file)</li> <li><code>creation_date</code>: Date when the file was created</li> <li><code>uuid</code>: Unique identifier for the file</li> <li><code>compression_format</code>: [gzip, snappy, lzo, none]</li> </ul> <p>Example parquet in Python:</p> <pre><code>import pyarrow as pa\nimport pyarrow.parquet as pq\n\n# Define a sample schema for the Parquet file\nschema = pa.schema([\n    ....\n])\n\n# Create sample data to write to the Parquet file\ndata = {\n    ....\n}\n\n# Convert the data to a PyArrow Table\ntable = pa.table(data, schema=schema)\n\n# Define the custom metadata as key-value pairs\nfile_metadata = {\n    'qpx_version': '1.0',\n    'software_provider': 'QuantMS 1.3.0',\n    'project_accession': 'PXD012345',\n    'project_title': 'Proteomics of Disease X',\n    'project_description': 'Project description',\n    'scan_format': 'scan',\n    'creator': 'John Doe',\n    'file_type': 'psm_file',\n    'creation_date': '2021-01-01',\n    'uuid': '943a8f02-0527-4528-b1a3-b96de99ebe75'\n}\n\n# Write the Parquet file with metadata\npq.write_table(table, 'psm_data.parquet', metadata=file_metadata)\n</code></pre> <p>NOTE</p> <p>Parquet files don't have a specific limit for metadata size, but practical constraints exist based on your system's memory, processing capabilities, and file management practices. The Parquet metadata, which is stored in the file's footer, includes information like schema, column statistics, and data offsets. The metadata is loaded into memory when the file is read, so large metadata can impact performance. For large metadata, consider storing the metadata in a separate file or database and linking to it from the Parquet file.</p>"},{"location":"format-specification/#psm-global-qvalue","title":"Psm global q-value","text":"<p>The global q-value represents the q-value at the level of the experiment. In OpenMS this is the PSM q-value that is by default global at the level of the experiment and the run. In DIA-NN, it represents <code>Global.Q.Value</code>. At the run level, the <code>Q.Value</code> will be collected by <code>additional_scores</code>.</p>"},{"location":"format-specification/#psm-format","title":"PSM Format Specification","text":"<p>The psm view can be found in psm.avsc.</p>"},{"location":"format-specification/#feature","title":"14.2. Peptide feature view","text":"<p>The peptide feature view (peptide features) aims to cover detail on quantified peptide information level at the msrun level, including peptide intensity in relation to the msrun and sample metadata. The <code>feature parquet file</code> is a parquet file that contains the details of the peptides quantified in the experiment and sample.</p> <p>The feature file is similar to the mztab peptide table, the peptide evidence in MaxQuant, the diann matrix table.</p>"},{"location":"format-specification/#feature-use-cases","title":"Feature use cases","text":"<ul> <li>Store peptide intensities in relation to the sample metadata to perform down-stream analysis and integration.</li> <li>Enable peptide level statistics and algorithms to move from peptide level to protein level.</li> <li>Different to the psm section psm contains all the protein inference information depending on if protein inference was applied or not.</li> </ul> <p>NOTE</p> <p>quantms also release the peptide table for MSstats. The goal of the feature table is to provide a more general peptide table and improve the annotations of the peptides with more columns.</p>"},{"location":"format-specification/#feature-fields","title":"Feature fields","text":"<p>The following table presents the fields needed to describe each feature in QPX. Some of the fields are shared with the psm view (psm).</p> Field Description Type DIA-NN FragPipe MaxQuant mzTab <code>sequence</code> The peptide's sequence (with no modifications) string Stripped.Sequence Peptide Sequence sequence <code>peptidoform</code> Peptide sequence with modifications, see more peptidoform string Modified.Sequence Modified Peptide Modified sequence opt_global_cv_MS:1000889_peptidoform_sequence <code>modifications</code> Modifications details: modification name, positions and localization probabilities: read modifications array[struct], null - - - - <code>precursor_charge</code> Precursor charge int32 Precursor.Charge - Charge charge <code>posterior_error_probability</code> Posterior error probability (PEP) for the given peptide or psm match. float32, null PEP x PEP opt_global_Posterior_Error_Probability_score <code>is_decoy</code> Decoy indicator, 1 if the peptide is a decoy, 0 target int32 - - Reverse opt_global_cv_MS:1002217_decoy_peptide <code>calculated_mz</code> Theoretical peptide mass-to-charge ratio based on an identified sequence and modifications float32 - Calculated M/Z - calc_mass_to_charge <code>observed_mz</code> Experimental peptide mass-to-charge ratio of identified peptide (in Da) float32 - - m/z exp_mass_to_charge <code>rt</code> Precursor retention time (in seconds) float32, null RT - Retention time retention_time <code>rt_start</code> Start of the retention time window for feature float, null RT.Start - - - <code>rt_stop</code> End of the retention time window for feature float, null RT.Stop - - - <code>predicted_rt</code> Predicted retention time of the peptide (in seconds) float, null Predicted.RT - - - <code>ion_mobility</code> Ion mobility value for the precursor ion float, null - - - - <code>start_ion_mobility</code> start ion mobility value for the precursor ion float, null - - - - <code>stop_ion_mobility</code> stop ion mobility value for the precursor ion float, null - - - - <code>additional_scores</code> List of structures, each structure contains two fields: name and value. array[struct{name: string, value: float32}] DIA-NN Scores FragPipe Scores MaxQuant Scores search_engine_score <code>cv_params</code> Optional list of CV parameters for additional metadata psm-cv-params array[struct{cv_name:string, cv_value:string}], null - - - - <code>intensities</code> The intensity-based abundance of the feature in the reference file for different channels intensities Precursor.Quantity Intensity Intensity Intensity <code>reference_file_name</code> The reference file name that contains the feature string Run - Raw file - <code>additional_intensities</code> Apart from the raw intensity, multiple intensity values can be provided as key-values pairs, for example, normalized intensity. intensities <code>pg_accessions</code> Protein group accession. Could be one single protein or multiple protein accessions, depending on the tool. array[string], null Protein.Group x Proteins accession <code>anchor_protein</code> One protein accession that represents the protein group string, null - - - - <code>unique</code> Unique peptide indicator, if the peptide maps to a single protein, the value is 1, otherwise 0 int32, null - Is Unique Unique unique <code>pg_global_qvalue</code> Global q-value of the protein group at the experiment level float, null Global.PG.Q.Value - - best_search_engine_score <code>gg_accessions</code> Gene group accessions. array[string], null - - - - <code>gg_names</code> Gene names, as a string array array[string], null Genes - - - <code>scan_reference_file_name</code> The reference file containing the best psm that identified the feature. Note: This file can be different from the file that contains the feature (<code>ReferenceFile</code>). string, null - - - - <code>scan</code> The scan number of the spectrum. The scan number or index of the spectrum in the file. string, null diann-scan - - - <p>NOTE</p> <ul> <li>The spectra information aims to provide for a given feature the scan used to identify it. In DDA protocols LFQ-DDA and DIAplex, we recommended os use the best psm for a given feature.</li> <li>Protein groups <code>gg_accessions</code> should contain all the proteins that discreve the protein group \u2014 for example, in MQ and FragPipe the anchor protein is the one selected to represent the group; while DIA-NN put all the proteins within a group. Similar to the psm section psm the entire list of proteins for a given group could be written in the <code>pg_accessions</code> field.</li> <li>conditions: Conditions for every feature, are the values of the <code>factor values</code>.</li> </ul> <p>TODO: We have to decide if we want to have one condition as anchor that can be used to understand better the experiment.</p>"},{"location":"format-specification/#intensities","title":"Intensities","text":"<p>We capture intensity values for each <code>feature</code> or <code>protein group</code> on a given <code>reference_file_name</code>. The intensity data is structured into two complementary fields:</p>"},{"location":"format-specification/#primary-intensities-intensities","title":"Primary Intensities (<code>intensities</code>)","text":"<p>The <code>intensities</code> field contains the primary/raw intensity measurements across different channels or samples. In label-free experiments, this is typically a single value per file, but in multiplexed experiments (TMT/iTRAQ) it contains multiple values - one for each channel. Each intensity entry contains:</p> <ul> <li><code>sample_accession</code>: Sample identifier (normally the <code>source name</code> in the SDRF)</li> <li><code>channel</code>: Channel identifier (e.g., \"LFQ\", \"TMT126\", \"iTRAQ114\")</li> <li><code>intensity</code>: Raw intensity value</li> </ul> <p>Example for TMT experiment:</p> <pre><code>intensities: [\n  {sample_accession: \"Sample-1\", channel: \"TMT126\", intensity: 1234.1},\n  {sample_accession: \"Sample-2\", channel: \"TMT127C\", intensity: 5678.2}\n]\n</code></pre> <p>Example for LFQ experiment:</p> <pre><code>intensities: [\n  {sample_accession: \"Sample-1\", channel: \"LFQ\", intensity: 9876.5}\n]\n</code></pre>"},{"location":"format-specification/#additional-intensities-additional_intensities","title":"Additional Intensities (<code>additional_intensities</code>)","text":"<p>The <code>additional_intensities</code> field contains derived/processed intensity values that are calculated from the primary intensities using different algorithms or normalization methods. Each entry contains the same sample and channel information plus an array of named intensity types:</p> <ul> <li><code>sample_accession</code>: Sample identifier (matches primary intensities)</li> <li><code>channel</code>: Channel identifier (matches primary intensities)</li> <li><code>intensities</code>: Array of intensity types with names and values</li> </ul> <p>Example:</p> <pre><code>additional_intensities: [\n  {\n    sample_accession: \"Sample-1\",\n    channel: \"LFQ\",\n    intensities: [\n      {intensity_name: \"normalize_intensity\", intensity_value: 0.1234},\n      {intensity_name: \"lfq\", intensity_value: 2345.6},\n      {intensity_name: \"ibaq\", intensity_value: 4567.8}\n    ]\n  }\n]\n</code></pre>"},{"location":"format-specification/#semantic-guidelines","title":"Semantic Guidelines","text":"<ul> <li>Use <code>intensities</code> for: Raw/primary measurements, different experimental channels (TMT/iTRAQ tags), different samples</li> <li>Use <code>additional_intensities</code> for: Normalized values, LFQ intensities, iBAQ values, algorithm-specific processed intensities</li> </ul> <p>This design separates experimental design aspects (channels/samples) from data processing aspects (normalization/algorithms), providing clear semantics for both data producers and consumers.</p>"},{"location":"format-specification/#diann-scan","title":"DIANN scan","text":"<p>The <code>DIA-NN</code> scan is a string that contains the scan number of the MS2 used to identify the peptide. We use the <code>rt</code> field and the mzML information to get that number.</p>"},{"location":"format-specification/#feature-format","title":"Feature Format Specification","text":"<p>The feature view can be found in feature.avsc.</p>"},{"location":"format-specification/#peptide","title":"14.3. Peptide summary view","text":"<p>The peptide summary view aims to cover detail on peptides quantified in the experiment and sample. A peptide could be a modified peptide (sequence with modifications) or non-modified peptide (sequence with no modifications) depending on the use case and the granularity of the data. The peptide view is a tab-delimited file format that claims to represent the peptides quantified in the experiment.</p>"},{"location":"format-specification/#peptide-use-cases","title":"Peptide use cases","text":"<ul> <li>It serves as a report file with all peptides quantified in the experiment for each protein.</li> <li>It can be used to generate peptide reports for integration with tools and services.</li> </ul>"},{"location":"format-specification/#peptide-fields","title":"Peptide fields","text":"<p>Some of the fields are shared between the psm and feature views.</p> Field Description Type <code>sequence</code> The peptide's sequence (with no modifications) string <code>peptidoform</code> Peptide sequence with modifications, see more peptidoform string <code>modifications</code> Modifications details: modification name, positions and localization probabilities: read modifications array[struct], null <code>gg_accessions</code> Gene group accessions. array[string], null <code>gg_names</code> Gene names, as a string array array[string], null <code>best_id_score</code> The best search engine score from all the features/psms identified array[struct[name: string, value:float32]], null <code>sample_accession</code> The sample accession in the SDRF, which column is called <code>source name</code> string, null <code>abundance</code> The peptide abundance in the given sample accession float32, null"},{"location":"format-specification/#peptide-format","title":"Peptide Format Specification","text":"<p>The peptide view can be found in peptide.avsc.</p>"},{"location":"format-specification/#protein","title":"15. Protein views: Protein groups and Protein summary","text":"<p>We have two main reports for protein information.</p> <ul> <li>The pg report is the output of the quantitative tool including quantms, MaxQuant or DIA-NN.</li> <li>The proteinsummary is a protein summary is a summary of the protein quantified by samples.</li> </ul>"},{"location":"format-specification/#pg","title":"15.1. Protein group view","text":"<p>The protein group view is a tabular file that contains the details of the protein groups identified and quantified. The protein group is similar to the outputs of multiple tools such as MaxQuant, DIA-NN, and others.</p> <p>The file defines the relation between a protein groups and the raw file that contains the protein group. The protein group view is a key file in the proteomics data analysis workflow as it describes the protein groups identified and quantified in the experiment.</p>"},{"location":"format-specification/#protein-group-use-cases","title":"Protein group use cases","text":"<ul> <li>Retrieve all the protein groups identified or quantified in the file.</li> <li>Compute the protein group abundance by file and condition.</li> <li>Store information about FDR and q-values for the protein groups identified/quantified.</li> </ul>"},{"location":"format-specification/#protein-group-fields","title":"Protein group fields","text":"Field Description Type DIA-NN FragPipe MaxQuant <code>pg_accessions</code> Protein group accessions of all the proteins within this group array[string] Protein.Group Group + Indistinguishable Proteins Protein IDs <code>pg_names</code> Protein group names array[string] Protein.Names - Protein names <code>gg_accessions</code> Gene group accessions, as a string array array[string] Genes - Gene names <code>reference_file_name</code> The raw file containing the identified/quantified protein string Run - combined <code>peptide_counts</code> Peptide sequence counts for this protein group in this specific file. Contains unique sequences (specific to this protein group) and total sequences. struct Unique.Stripped.Peptides Unique Peptides Unique peptides <code>feature_counts</code> Peptide feature counts (peptide charge combinations) for this protein group in this specific file. Contains unique features (specific to this protein group) and total features. struct Precursor.Quantity Precursor Ions MS/MS count <code>global_qvalue</code> Global q-value of the protein group at the experiment level float Global.PG.Q.Value - Q-value <code>intensities</code> The primary intensity-based abundance of the protein group in the sample across different channels. Contains raw/primary measurements from the quantification tool. intensities PG.Quantity - Intensity, LFQ intensity <code>additional_intensities</code> Derived/processed intensity values calculated from primary intensities using different algorithms (normalization, LFQ, iBAQ, etc.). intensities PG.Normalised, PG.MaxLFQ - LFQ intensity, iBAQ <code>peptides</code> Number of peptides per protein in the protein group array[struct] - - Razor + unique peptides, Unique peptides <code>anchor_protein</code> Representative protein of the protein group (usually the first) string - - First protein in Protein IDs <code>is_decoy</code> Decoy indicator int32 - - Reverse <code>contaminant</code> Contaminant indicator int32 - - Potential contaminant <code>additional_scores</code> Additional scores and metrics array[struct] - - Score, Sequence coverage [%], Mol. weight [kDa], MS/MS count"},{"location":"format-specification/#protein_additional_scores","title":"protein additional scores","text":"<p>At the protein level, additional scores should be store for each given protein group. The additional scores are stored as a list of key-value pairs, where the key is the name of the score (is RECOMMENDED to use HUPO-PSI MS ontology) and the value is an array of float32 values where the index of values matches to the index on the <code>pg_accessions</code> field. Additional scores are mainly the search engine and protein scores that want to be added at the protein group level.</p>"},{"location":"format-specification/#proteinsummary","title":"16. Protein view","text":"<p>The protein view is a report of the proteins identified/quantified in the experiment. It doesn't contain major information about the inference of the protein group, but it contains the protein abundance and the protein identification scores.</p>"},{"location":"format-specification/#161-use-cases","title":"16.1. Use cases","text":"<ul> <li>Fast reports of the proteins quantified/identified in an experiment with for Web interfaces and search engines.</li> <li>Connection to AE/DE formats that enable to talk about the coverage of the protein identification.</li> </ul> Field Description Type <code>abundance</code> Abundance of the given protein in the sample/experiment null, float <code>sample_accession</code> Sample accession in the SDRF, which column is called <code>source name</code> string <code>best_id_score</code> The best search engine score for the identification <code>[{\"type\": \"record\", \"name\": \"score\", \"fields\": [{ \"name\": \"name\", \"type\": \"string\" },{ \"name\": \"value\", \"type\": \"float32\" }]}, null]</code> <code>gene_accessions</code> The gene accessions corresponding to every protein null, array[string] <code>gene_names</code> The gene names corresponding to every protein null, array[string] <code>number_peptides</code> The total number of peptides for a give protein null, integer <code>number_psms</code> The total number of peptide spectrum matches null, integer <code>number_unique_peptides</code> The total number of unique peptides null, integer"},{"location":"format-specification/#protein-format","title":"Protein Format Specification","text":"<p>The protein view can be found in protein.avsc.</p>"},{"location":"format-specification/#mz","title":"17. Mass spectra view","text":"<p>The mass spectra view is a tabular file that contains the details of the mass spectra identified and quantified. This view is based on mz_parquet format developed by Michael Lazear. The mz_parquet format is a parquet-based format that stores the mass spectra information in a columnar format.</p>"},{"location":"format-specification/#171-mass-spectra-use-cases","title":"17.1. Mass spectra use cases","text":"<ul> <li>Retrieve all the precursor mass, retention time, and intensity in the file.</li> <li>Enable easy visualization and scanning on mass spectra level.</li> <li>AI/ML training and prediction on mass spectra level.</li> </ul>"},{"location":"format-specification/#172-mass-spectra-fields","title":"17.2. Mass spectra fields","text":"Field Type Description <code>id</code> string Unique identifier for the scan or spectrum <code>ms_level</code> int The MS level (e.g., 1 for MS1, 2 for MS2) <code>centroid</code> boolean Indicates whether the data is centroided (true) or profile mode (false) <code>scan_start_time</code> float The start time of the scan in minutes <code>inverse_ion_mobility</code> float, null Inverse ion mobility, if available, used for TIMS data <code>ion_injection_time</code> float The ion injection time in milliseconds <code>total_ion_current</code> float Total ion current (TIC) for the scan <code>precursors</code> array[struct], null List of precursors for this scan, if applicable. Each precursor contains: selected_ion_mz, selected_ion_charge, selected_ion_intensity, isolation_window_target, isolation_window_lower, isolation_window_upper, spectrum_ref <code>mz</code> array[float] List of m/z values for the scan <code>intensity</code> array[float] List of intensity values corresponding to the m/z values <code>cv_params</code> array[struct{name: string, value: string}], null Optional list of CV parameters for additional metadata"},{"location":"format-specification/#mz-format","title":"Mass Spectra Format Specification","text":"<p>The mass spectra view can be found in mz.avsc.</p>"},{"location":"formats/","title":"Supported Formats","text":""},{"location":"formats/#format-conversion-flow","title":"Format Conversion Flow","text":""},{"location":"formats/#input-formats","title":"Input Formats","text":"Software PSM Feature Protein Group MaxQuant msms.txt evidence.txt proteinGroups.txt DIA-NN report.tsv report.tsv pg_matrix.tsv FragPipe psm.tsv - - OpenMS idXML - - mzTab PSM section PEP section PRT section"},{"location":"formats/#output-format","title":"Output Format","text":"<p>All conversions produce standardized parquet files following the QPX specification:</p> <ul> <li>PSM files: <code>*-psm.parquet</code> - Peptide-spectrum matches</li> <li>Feature files: <code>*-feature.parquet</code> - Quantified peptide features</li> <li>Protein Group files: <code>*-pg.parquet</code> - Protein quantification</li> <li>AE files: <code>*-absolute.parquet</code> - Absolute expression (iBAQ)</li> <li>DE files: <code>*-differential.parquet</code> - Differential expression</li> </ul> <p>View format specification \u2192</p>"},{"location":"installation/","title":"Installation Options","text":""},{"location":"installation/#standard-installation","title":"Standard Installation","text":"<pre><code>pip install qpx\n</code></pre>"},{"location":"installation/#from-source","title":"From Source","text":"<pre><code>git clone https://github.com/bigbio/qpx.git\ncd qpx\npip install .\n</code></pre>"},{"location":"installation/#development-installation","title":"Development Installation","text":"<p>For contributing to the project:</p> <pre><code># 1. Fork the repository on GitHub\n# Visit https://github.com/bigbio/qpx and click \"Fork\"\n\n# 2. Clone your fork\ngit clone https://github.com/YOUR-USERNAME/qpx\ncd qpx\n\n# 3. Install dependencies\n# Using Poetry (recommended)\npoetry install\n\n# Or using pip\npip install -r requirements.txt\npip install -e .\n</code></pre>"},{"location":"quickstart/","title":"Quick Start","text":""},{"location":"quickstart/#quick-start-flow","title":"Quick Start Flow","text":"<p>Get started with qpx in a few simple steps: from installation to data conversion, transformation, and visualization.</p>"},{"location":"quickstart/#installation","title":"Installation","text":"<pre><code>pip install qpx\n</code></pre>"},{"location":"quickstart/#basic-usage","title":"Basic Usage","text":"<pre><code># View available commands\nqpxc --help\n\n# Convert MaxQuant data\nqpxc convert maxquant-psm \\\n    --msms-file msms.txt \\\n    --output-folder ./output\n\n# Transform to absolute expression\nqpxc transform ae \\\n    --ibaq-file ibaq.tsv \\\n    --sdrf-file metadata.sdrf.tsv \\\n    --output-folder ./output\n\n# Generate visualizations\nqpxc visualize plot ibaq-distribution \\\n    --ibaq-path ./output/ae.parquet \\\n    --save-path ./plots/distribution.svg\n</code></pre> <p>View complete CLI documentation \u2192</p>"},{"location":"workflow/","title":"Example Workflow","text":""},{"location":"workflow/#complete-workflow-overview","title":"Complete Workflow Overview","text":"<p>The complete qpx workflow includes data conversion, statistical analysis, transformation, and visualization - from raw data to publication-ready plots.</p>"},{"location":"workflow/#detailed-example","title":"Detailed Example","text":"<p>A complete example of processing proteomics data with qpx:</p> <pre><code># 1. Convert MaxQuant output\nqpxc convert maxquant-psm \\\n    --msms-file data/msms.txt \\\n    --output-folder ./output\n\nqpxc convert maxquant-feature \\\n    --evidence-file data/evidence.txt.gz \\\n    --sdrf-file data/experiment.sdrf.tsv \\\n    --protein-groups-file data/proteinGroups.txt \\\n    --output-folder ./output\n\n# 2. Calculate absolute expression\nqpxc transform ae \\\n    --ibaq-file data/ibaq.tsv \\\n    --sdrf-file data/experiment.sdrf.tsv \\\n    --output-folder ./output\n\n# 3. Generate statistics\nqpxc stats analyze psm \\\n    --parquet-path ./output/psm.parquet \\\n    --save-path ./reports/statistics.txt\n\n# 4. Create visualizations\nqpxc visualize plot box-intensity \\\n    --feature-path ./output/feature.parquet \\\n    --save-path ./plots/intensity_distribution.svg\n\n# 5. Create project metadata\nqpxc project create \\\n    --project-accession PXD001234 \\\n    --sdrf-file data/experiment.sdrf.tsv \\\n    --output-folder ./project\n</code></pre> <p>View more examples \u2192</p>"}]}